import{j as e,T as ds,c as vt,p as hs,_ as se,t as U,r as l,a as xs,$ as bt,O as Ns,b as fs,d as ps,e as gs,S as vs,f as Re,R as Dt,g as G,u as Et,L as E,A as ie,h as A,i as M,k as de,l as bs,H as Ut,U as Ds,m as ot,n as Y,o as Es,C as Us,q as ys,D as qs,s as js,v as ws,P as Vs,w as Rs,x as ks,y as be,z as ke,B as yt,E as De,X as it,F as Cs,G as Ss,I as ae,J as qt,K as jt,M as wt,N as Ts,Q as Ls,V as Vt,W as Ps,Y as Rt,Z as As,a0 as kt,a1 as Ct,a2 as Ms,a3 as Is,a4 as He,a5 as Be,a6 as Ke,a7 as St,a8 as Fs,a9 as $s,aa as Os,ab as _s,ac as zs,ad as Bs,ae as Ks,af as dt,ag as Qs,ah as Hs,ai as Js,aj as Ws,ak as Tt,al as Ys,am as Lt,an as Ce,ao as Pt,ap as Gs,aq as At,ar as Xs,as as Mt,at as It,au as Ft,av as $t,aw as Ot,ax as Zs,ay as _t,az as zt,aA as er,aB as tr,aC as sr,aD as rr,aE as Je,aF as We,aG as nr,aH as or,aI as ir,aJ as ar,aK as lr,aL as Bt,aM as cr,aN as Ye,aO as mr,aP as Ge,aQ as ht,aR as ur,aS as dr,aT as hr,aU as Kt,aV as Qt,aW as xr,aX as Nr,aY as Qe,aZ as fr,a_ as pr,a$ as gr,b0 as vr,b1 as br,b2 as Dr,b3 as Er,b4 as Ur,b5 as yr,b6 as qr,b7 as jr,b8 as wr}from"./vendor-BCNIWibw.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const Vr=({...r})=>e.jsxDEV(ds,{theme:"light",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/sonner.tsx",lineNumber:5,columnNumber:5},void 0);function at(r){try{if(!r||typeof r!="string")return null;const t=r.split(".");if(t.length!==3)return null;const s=t[1],n=s+"=".repeat((4-s.length%4)%4),o=atob(n),a=JSON.parse(o);return!a.userId||!a.exp||!a.iat?(console.warn("JWT payload missing required fields:",a),null):a}catch(t){return console.warn("Failed to decode JWT token:",t),null}}function X(r){const t=at(r);if(!t)return!0;const s=Math.floor(Date.now()/1e3);return t.exp<=s}function Ue(r){const t=at(r);if(!t)return null;const s=Date.now(),n=Math.floor(s/1e3),o=new Date(t.exp*1e3),a=new Date(t.iat*1e3),i=t.exp*1e3-s,c=t.exp<=n,m=5*60*1e3,u=i<=m&&i>0;return{payload:t,isExpired:c,expiresAt:o,issuedAt:a,timeUntilExpiry:i,isNearExpiry:u}}function Ht(r,t=5){const s=Ue(r);if(!s||s.isExpired)return!0;const n=t*60*1e3;return s.timeUntilExpiry<=n}function O(r){try{if(!r||typeof r!="string"||r.split(".").length!==3)return!1;const s=at(r);if(!s)return!1;const n=["userId","email","username","tokenVersion","iat","exp"];for(const o of n)if(!(o in s))return!1;return!(s.exp<=s.iat)}catch{return!1}}var _=(r=>(r.EXPIRED="expired",r.NEAR_EXPIRY="near_expiry",r.REFRESHED="refreshed",r.INVALID="invalid",r))(_||{});const Rr={checkInterval:30*1e3,warningThreshold:5,autoRefreshThreshold:2},T=vt()(hs((r,t)=>({user:null,isAuthenticated:!1,tokens:null,setUser:s=>{r({user:s})},setAuthenticated:s=>{r({isAuthenticated:s})},setTokens:s=>{if(s.accessToken&&!O(s.accessToken)){console.warn("Invalid access token structure, not setting tokens");return}if(s.refreshToken&&!O(s.refreshToken)){console.warn("Invalid refresh token structure, not setting tokens");return}if(s.accessToken&&X(s.accessToken)){console.warn("Access token is expired, not setting tokens");return}r({tokens:s});const n=s.accessToken&&!X(s.accessToken);n!==t().isAuthenticated&&r({isAuthenticated:n})},logout:()=>{console.log("Auth store: Logging out user"),r({user:null,isAuthenticated:!1,tokens:null});try{localStorage.removeItem("auth-storage")}catch(s){console.warn("Failed to clear auth storage:",s)}},isTokenValid:()=>{const{tokens:s}=t();return s?.accessToken?O(s.accessToken)&&!X(s.accessToken):!1},checkTokenExpiration:()=>{const{tokens:s,logout:n}=t();return s?.accessToken?X(s.accessToken)?(console.log("Auth store: Access token expired, logging out"),n(),!1):!0:!1},getTokenInfo:()=>{const{tokens:s}=t();return s?.accessToken?Ue(s.accessToken):null},login:async(s,n)=>(await new Promise(o=>setTimeout(o,1e3)),s==="demo@example.com"&&n==="password"?(r({user:{id:"1",name:"Demo User",email:"demo@example.com",avatar:"/api/placeholder/120/120"},isAuthenticated:!0}),!0):!1),register:async(s,n,o)=>{await new Promise(i=>setTimeout(i,1e3));const a={id:Date.now().toString(),name:s,email:n,avatar:"/api/placeholder/120/120"};return r({user:a,isAuthenticated:!0}),!0}}),{name:"auth-storage",partialize:r=>({user:r.user,isAuthenticated:r.isAuthenticated,tokens:r.tokens})})),Xe=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:T},Symbol.toStringTag,{value:"Module"}));class kr{intervalId=null;config;callbacks=new Set;lastWarningTime=0;lastRefreshAttempt=0;isMonitoring=!1;constructor(t={}){this.config={...Rr,...t},this.checkTokenExpiration=this.checkTokenExpiration.bind(this),this.handleTokenExpired=this.handleTokenExpired.bind(this),this.handleTokenNearExpiry=this.handleTokenNearExpiry.bind(this),this.handleTokenRefreshed=this.handleTokenRefreshed.bind(this),this.handleTokenInvalid=this.handleTokenInvalid.bind(this)}start(){if(this.isMonitoring){console.log("Token monitor already running");return}console.log("Starting token expiration monitoring...",{checkInterval:this.config.checkInterval,warningThreshold:this.config.warningThreshold,autoRefreshThreshold:this.config.autoRefreshThreshold}),this.isMonitoring=!0,this.intervalId=setInterval(this.checkTokenExpiration,this.config.checkInterval),this.checkTokenExpiration()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isMonitoring=!1,console.log("Token expiration monitoring stopped")}addCallback(t){this.callbacks.add(t)}removeCallback(t){this.callbacks.delete(t)}updateConfig(t){this.config={...this.config,...t},this.isMonitoring&&(this.stop(),this.start())}getStatus(){return{isMonitoring:this.isMonitoring,config:{...this.config}}}checkTokenExpiration(){try{const t=this.getTokensFromStorage();if(!t.accessToken)return;if(!O(t.accessToken)){console.warn("Invalid access token structure detected"),this.handleTokenInvalid();return}const s=Ue(t.accessToken);if(!s){console.warn("Unable to get token info"),this.handleTokenInvalid();return}if(s.isExpired){console.log("Access token has expired"),this.handleTokenExpired();return}if(Ht(t.accessToken,this.config.autoRefreshThreshold)){const n=Date.now();n-this.lastRefreshAttempt>3e4&&(console.log("Token needs refresh, attempting automatic refresh..."),this.lastRefreshAttempt=n,this.attemptTokenRefresh());return}if(s.isNearExpiry){const n=Date.now();n-this.lastWarningTime>6e4&&(this.lastWarningTime=n,this.handleTokenNearExpiry(s.timeUntilExpiry))}}catch(t){console.error("Error checking token expiration:",t)}}getTokensFromStorage(){try{const t=localStorage.getItem("auth-storage");if(t){const n=JSON.parse(t).state?.tokens;return{accessToken:n?.accessToken||null,refreshToken:n?.refreshToken||null}}}catch(t){console.warn("Failed to get tokens from storage:",t)}return{accessToken:null,refreshToken:null}}async attemptTokenRefresh(){try{const{httpClient:t}=await se(async()=>{const{httpClient:s}=await Promise.resolve().then(()=>Ee);return{httpClient:s}},void 0);await t.get("/auth/me"),console.log("Token refresh successful"),this.handleTokenRefreshed()}catch(t){console.error("Token refresh failed:",t),this.handleTokenExpired()}}handleTokenExpired(){console.log("Handling token expiration - logging out user"),this.notifyCallbacks(_.EXPIRED),U.error("Your session has expired. Please log in again.",{duration:5e3,action:{label:"Login",onClick:()=>{window.location.href="/login"}}}),this.config.onTokenExpired&&this.config.onTokenExpired(),this.triggerLogout()}handleTokenNearExpiry(t){const s=Math.floor(t/6e4),n=s>0?`${s} minute${s>1?"s":""}`:"less than a minute";console.log(`Token near expiry: ${n} remaining`),this.notifyCallbacks(_.NEAR_EXPIRY,{timeUntilExpiry:t,timeLeftText:n}),U.warning(`Your session will expire in ${n}. Please save your work.`,{duration:1e4,action:{label:"Extend Session",onClick:()=>{this.attemptTokenRefresh()}}}),this.config.onTokenNearExpiry&&this.config.onTokenNearExpiry(n)}handleTokenRefreshed(){console.log("Token refreshed successfully"),this.lastWarningTime=0,this.notifyCallbacks(_.REFRESHED),U.success("Session extended successfully",{duration:3e3}),this.config.onTokenRefreshed&&this.config.onTokenRefreshed()}handleTokenInvalid(){console.log("Invalid token detected - logging out user"),this.notifyCallbacks(_.INVALID),U.error("Your session is invalid. Please log in again.",{duration:5e3}),this.config.onTokenInvalid&&this.config.onTokenInvalid(),this.triggerLogout()}notifyCallbacks(t,s){this.callbacks.forEach(n=>{try{n(t,s)}catch(o){console.error("Error in token monitor callback:",o)}})}async triggerLogout(){try{const{useAuthStore:t}=await se(async()=>{const{useAuthStore:a}=await Promise.resolve().then(()=>Xe);return{useAuthStore:a}},void 0);t.getState().logout();const{httpClient:n}=await se(async()=>{const{httpClient:a}=await Promise.resolve().then(()=>Ee);return{httpClient:a}},void 0);n.clearAuth();const o=window.location.pathname+window.location.search;o!=="/login"&&(window.location.href=`/login?redirect=${encodeURIComponent(o)}`)}catch(t){console.error("Error during logout:",t),localStorage.removeItem("auth-storage"),window.location.href="/login"}}}const ge=new kr;function Cr(r={}){const{autoStart:t=!0,showNotifications:s=!0,onTokenEvent:n,autoLogout:o=!0,checkInterval:a=3e4,warningThreshold:i=5,autoRefreshThreshold:c=2}=r,{isAuthenticated:m,tokens:u,logout:v,checkTokenExpiration:h,getTokenInfo:g,isTokenValid:q}=T(),R=l.useRef(null),w=l.useRef(!1),x=l.useCallback((f,b)=>{if(console.log("Token event:",f,b),n)try{n(f,b)}catch($){console.error("Error in custom token event callback:",$)}switch(f){case _.EXPIRED:s&&U.error("Your session has expired. Please log in again.",{duration:5e3,action:{label:"Login",onClick:()=>{window.location.href="/login"}}}),o&&v();break;case _.NEAR_EXPIRY:s&&b?.timeLeftText&&U.warning(`Your session will expire in ${b.timeLeftText}. Please save your work.`,{duration:1e4,action:{label:"Extend Session",onClick:async()=>{try{await C(),U.success("Session extended successfully")}catch{U.error("Failed to extend session")}}}});break;case _.REFRESHED:s&&U.success("Session extended successfully",{duration:3e3});break;case _.INVALID:s&&U.error("Your session is invalid. Please log in again.",{duration:5e3}),o&&v();break}},[n,s,o,v]),y=l.useCallback(()=>{w.current||(console.log("Starting token monitoring..."),ge.updateConfig({checkInterval:a,warningThreshold:i,autoRefreshThreshold:c}),R.current=x,ge.addCallback(R.current),ge.start(),w.current=!0)},[a,i,c,x]),N=l.useCallback(()=>{w.current&&(console.log("Stopping token monitoring..."),R.current&&(ge.removeCallback(R.current),R.current=null),ge.stop(),w.current=!1)},[]),C=l.useCallback(async()=>{try{const{httpClient:f}=await se(async()=>{const{httpClient:b}=await Promise.resolve().then(()=>Ee);return{httpClient:b}},void 0);await f.forceRefresh()}catch(f){throw console.error("Failed to force refresh token:",f),f}},[]);return l.useEffect(()=>(t&&m&&u?.accessToken?h()&&y():N(),()=>{N()}),[t,m,u?.accessToken,y,N,h]),l.useEffect(()=>{m&&u?.accessToken&&(h()||N())},[u?.accessToken,m,h,N]),{isMonitoring:w.current,startMonitoring:y,stopMonitoring:N,getTokenInfo:g,isTokenValid:q,forceRefresh:C}}function Sr({debug:r=!1,messages:t={},autoRedirect:s=!0}){const{isAuthenticated:n}=T(),a={...{expired:"Your session has expired. Please log in again.",nearExpiry:"Your session will expire soon. Please save your work.",refreshed:"Session extended successfully.",invalid:"Your session is invalid. Please log in again."},...t},i=(u,v)=>{switch(r&&console.log("TokenMonitor: Token event received:",u,v),u){case _.EXPIRED:U.error(a.expired,{duration:8e3,action:s?{label:"Login",onClick:()=>{const h=window.location.pathname+window.location.search;window.location.href=`/login?redirect=${encodeURIComponent(h)}`}}:void 0});break;case _.NEAR_EXPIRY:v?.timeLeftText?U.warning(`${a.nearExpiry} Time remaining: ${v.timeLeftText}`,{duration:15e3,action:{label:"Extend Session",onClick:async()=>{try{const{httpClient:h}=await se(async()=>{const{httpClient:g}=await Promise.resolve().then(()=>Ee);return{httpClient:g}},void 0);await h.forceRefresh(),U.success("Session extended successfully")}catch{U.error("Failed to extend session. Please save your work and log in again.")}}}}):U.warning(a.nearExpiry,{duration:1e4});break;case _.REFRESHED:r&&U.success(a.refreshed,{duration:3e3});break;case _.INVALID:U.error(a.invalid,{duration:8e3,action:s?{label:"Login",onClick:()=>{window.location.href="/login"}}:void 0});break}},{isMonitoring:c,getTokenInfo:m}=Cr({autoStart:!0,showNotifications:!1,autoLogout:!0,onTokenEvent:i,checkInterval:3e4,warningThreshold:5,autoRefreshThreshold:2});return l.useEffect(()=>{if(r&&n){const u=m();u&&console.log("TokenMonitor: Current token info:",{isMonitoring:c,expiresAt:u.expiresAt,timeUntilExpiry:u.timeUntilExpiry,isNearExpiry:u.isNearExpiry,isExpired:u.isExpired})}},[r,n,c,m]),l.useEffect(()=>{r&&(c&&n?U.info("Token monitoring started",{duration:2e3}):!c&&!n&&U.info("Token monitoring stopped",{duration:2e3}))},[r,c,n]),null}const W=xs({component:()=>e.jsxDEV(bt.Fragment,{children:[e.jsxDEV(Ns,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/__root.tsx",lineNumber:9,columnNumber:9},void 0),e.jsxDEV(Vr,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/__root.tsx",lineNumber:10,columnNumber:9},void 0),e.jsxDEV(Sr,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/__root.tsx",lineNumber:11,columnNumber:9},void 0),e.jsxDEV(fs,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/__root.tsx",lineNumber:12,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/__root.tsx",lineNumber:8,columnNumber:12},void 0)});function p(...r){return ps(gs(r))}const lt=Re("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:r,variant:t,size:s,asChild:n=!1,...o}){const a=n?vs:"button";return e.jsxDEV(a,{"data-slot":"button",className:p(lt({variant:t,size:s,className:r})),...o},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/button.tsx",lineNumber:51,columnNumber:5},this)}const K=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("rounded-xl border bg-card text-card-foreground shadow",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:9,columnNumber:3},void 0));K.displayName="Card";const H=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("flex flex-col space-y-1.5 p-6",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:24,columnNumber:3},void 0));H.displayName="CardHeader";const J=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("font-semibold leading-none tracking-tight",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:36,columnNumber:3},void 0));J.displayName="CardTitle";const oe=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("text-sm text-muted-foreground",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:48,columnNumber:3},void 0));oe.displayName="CardDescription";const Q=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("p-6 pt-0",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:60,columnNumber:3},void 0));Q.displayName="CardContent";const Tr=l.forwardRef(({className:r,...t},s)=>e.jsxDEV("div",{ref:s,className:p("flex items-center p-6 pt-0",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/card.tsx",lineNumber:68,columnNumber:3},void 0));Tr.displayName="CardFooter";const L=l.forwardRef(({className:r,type:t,...s},n)=>e.jsxDEV("input",{type:t,className:p("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/input.tsx",lineNumber:8,columnNumber:7},void 0));L.displayName="Input";const Lr=Re("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),P=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(Dt,{ref:s,className:p(Lr(),r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/label.tsx",lineNumber:16,columnNumber:3},void 0));P.displayName=Dt.displayName;const Pr=G("/verify-otp")({component:Ar,validateSearch:r=>({e:r.e||""})});function Ar(){const r=Et({from:"/verify-otp"}),[t,s]=l.useState(""),n=()=>{console.log("Verifying OTP:",t,"for email:",r.e)};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(E,{to:"/forgot-password",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:27,columnNumber:11},this),"Back"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:25,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Verify OTP"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:34,columnNumber:11},this),e.jsxDEV(oe,{children:["Enter the 6-digit code sent to ",r.e||"your email"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:35,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:33,columnNumber:9},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"otp",children:"OTP Code"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV(L,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:t,onChange:o=>s(o.target.value),maxLength:6,className:"text-center text-lg tracking-widest",required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:40,columnNumber:11},this),e.jsxDEV(d,{className:"w-full",onClick:n,disabled:t.length!==6,children:"Verify OTP"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV(E,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Resend Code"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:48,columnNumber:13},this),e.jsxDEV("div",{children:e.jsxDEV(E,{to:"/login",search:{redirect:"/"},className:"text-sm text-blue-600 hover:underline",children:"Back to Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:52,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:51,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:39,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:32,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/verify-otp.tsx",lineNumber:23,columnNumber:10},this)}const Mr={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_API_URL:"http://localhost:8080",VITE_APP_DESCRIPTION:"Modern MERN stack application with real-time features",VITE_APP_NAME:"React Todo & Chat App 2025",VITE_APP_VERSION:"1.0.0",VITE_CLIENT_PORT:"5173",VITE_DEV_SERVER_PORT:"5173",VITE_ENABLE_CHAT:"true",VITE_ENABLE_DARK_MODE:"true",VITE_ENABLE_NOTIFICATIONS:"true",VITE_SERVER_PORT:"3000",VITE_WS_URL:"http://localhost:3000"},Ir=()=>"3000",Fr=()=>"5173",$r=()=>"http://localhost:3000/api",Or=()=>"http://localhost:3000",_r=()=>({enableChat:!0,enableNotifications:!0,enableDarkMode:!0}),te={serverPort:Ir(),clientPort:Fr(),apiBaseUrl:$r(),socketUrl:Or(),appName:"React Todo & Chat App 2025",appVersion:"1.0.0",appDescription:"Modern MERN stack application with real-time features",features:_r(),isDevelopment:!0,isProduction:!1,mode:"production",debug:{showTokenStatus:!0,enableVerboseLogging:!0,showPerformanceMetrics:!0}},zr=()=>{const t=["VITE_SERVER_PORT","VITE_CLIENT_PORT"].filter(s=>{const n=Mr[s];return!n||n===""});return{isValid:t.length===0,missingVars:t}};{console.log("üîß Client Configuration:",{apiBaseUrl:te.apiBaseUrl,socketUrl:te.socketUrl,appName:te.appName,features:te.features,environment:te.mode});const r=zr();r.isValid||console.warn("‚ö†Ô∏è Missing environment variables:",r.missingVars)}class Jt{baseURL;accessToken=null;refreshToken=null;refreshAttempts=0;maxRefreshAttempts=3;isRefreshing=!1;refreshPromise=null;constructor(t=te.apiBaseUrl){this.baseURL=t,this.loadTokensFromStorage(),console.log("HTTP Client initialized:",{baseURL:this.baseURL,hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken})}loadTokensFromStorage(){try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t),n=s.state?.tokens||s.tokens;this.accessToken=n?.accessToken||null,this.refreshToken=n?.refreshToken||null,console.log("Loading tokens from storage:",{hasAuthData:!!t,hasState:!!s.state,hasTokens:!!n,hasAccessToken:!!this.accessToken})}}catch(t){console.warn("Failed to load tokens from storage:",t)}}saveTokensToStorage(t,s){this.accessToken=t,this.refreshToken=s,this.refreshAttempts=0;try{let n=localStorage.getItem("auth-storage"),o;n?o=JSON.parse(n):o={state:{user:null,isAuthenticated:!1,tokens:null},version:0},o.state||(o.state={}),o.state.tokens={accessToken:t,refreshToken:s},t&&(o.state.isAuthenticated=!0),localStorage.setItem("auth-storage",JSON.stringify(o)),console.log("Saved tokens to localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!s,accessTokenPreview:t?`${t.substring(0,20)}...`:null,fullStructure:o});const a=localStorage.getItem("auth-storage");if(a){const i=JSON.parse(a);console.log("Verification - tokens in storage:",{hasTokens:!!i.state?.tokens,hasAccessToken:!!i.state?.tokens?.accessToken})}}catch(n){console.error("Failed to save tokens to storage:",n)}}clearTokens(){this.accessToken=null,this.refreshToken=null,this.refreshAttempts=0;try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t);delete s.state.tokens,localStorage.setItem("auth-storage",JSON.stringify(s))}}catch(t){console.warn("Failed to clear tokens from storage:",t)}}syncTokensFromAuthStore(){try{const t=localStorage.getItem("auth-storage");if(t){const n=JSON.parse(t).state?.tokens;if(n?.accessToken&&n?.refreshToken)return this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,console.log("Synced tokens from authStore:",{hasAccessToken:!!this.accessToken,accessTokenLength:this.accessToken?.length}),!0}}catch(t){console.warn("Failed to sync tokens from authStore:",t)}return!1}async request(t,s={}){this.accessToken||this.syncTokensFromAuthStore(),await this.ensureValidToken(t);const n=`${this.baseURL}${t}`,o={...s.headers};s.body instanceof FormData||(o["Content-Type"]="application/json"),this.accessToken?(o.Authorization=`Bearer ${this.accessToken}`,console.log("Adding Authorization header:",`Bearer ${this.accessToken.substring(0,20)}...`)):console.warn("No access token available for request to:",t),console.log("this.accessToken",this.accessToken);try{const a=await fetch(n,{...s,headers:o}),i=await a.json();if(!a.ok){if(a.status===401&&this.refreshToken&&t!=="/auth/refresh"&&this.refreshAttempts<this.maxRefreshAttempts)try{return this.refreshAttempts++,console.log(`Attempting token refresh (${this.refreshAttempts}/${this.maxRefreshAttempts})`),await this.refreshAccessToken(),this.request(t,s)}catch(c){throw console.error(`Token refresh failed (attempt ${this.refreshAttempts}):`,c),this.refreshAttempts>=this.maxRefreshAttempts&&(console.log("Max refresh attempts reached, logging out user"),this.handleAuthFailure()),new ee("Session expired. Please login again.",401)}else a.status===401&&this.handleAuthFailure();throw new ee(i.message||`HTTP ${a.status}: ${a.statusText}`,a.status,i.errors)}return i}catch(a){throw a instanceof ee?a:new ee(a instanceof Error?a.message:"Network error occurred",0)}}async ensureValidToken(t){if(!t.startsWith("/auth/")&&(this.accessToken||this.syncTokensFromAuthStore(),!!this.accessToken)){if(!O(this.accessToken))throw console.warn("Invalid access token structure, clearing tokens"),this.handleAuthFailure(),new ee("Invalid token structure",401);if(X(this.accessToken)){console.log("Access token is expired, attempting refresh..."),await this.handleExpiredToken();return}if(Ht(this.accessToken,2)){console.log("Access token near expiry, proactively refreshing...");try{await this.proactiveTokenRefresh()}catch(s){console.warn("Proactive token refresh failed, will retry on 401:",s)}}}}async handleExpiredToken(){if(!this.refreshToken)throw console.log("No refresh token available, logging out"),this.handleAuthFailure(),new ee("Session expired",401);try{await this.refreshAccessToken(),console.log("Successfully refreshed expired token")}catch(t){throw console.error("Failed to refresh expired token:",t),this.handleAuthFailure(),new ee("Session expired",401)}}async proactiveTokenRefresh(){if(this.isRefreshing){this.refreshPromise&&await this.refreshPromise;return}this.isRefreshing=!0,this.refreshPromise=this.refreshAccessToken().finally(()=>{this.isRefreshing=!1,this.refreshPromise=null}),await this.refreshPromise}handleAuthFailure(){console.log("Authentication failed, clearing tokens and redirecting to login"),this.clearTokens(),this.isRefreshing=!1,this.refreshPromise=null,this.refreshAttempts=0;try{se(async()=>{const{useAuthStore:t}=await Promise.resolve().then(()=>Xe);return{useAuthStore:t}},void 0).then(({useAuthStore:t})=>{t.getState().logout()})}catch(t){console.warn("Failed to clear auth store:",t),localStorage.removeItem("auth-storage")}if(typeof window<"u"&&window.location.pathname!=="/login"){const t=window.location.pathname+window.location.search;window.location.href=`/login?redirect=${encodeURIComponent(t)}`}}async refreshAccessToken(){if(!this.refreshToken)throw new Error("No refresh token available");if(!O(this.refreshToken))throw console.warn("Invalid refresh token structure"),new Error("Invalid refresh token structure");if(X(this.refreshToken))throw console.warn("Refresh token is expired"),new Error("Refresh token expired");try{console.log("Attempting to refresh access token...");const t=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:this.refreshToken})});if(!t.ok){const i=(await t.json().catch(()=>({}))).message||`HTTP ${t.status}: ${t.statusText}`;throw new Error(`Failed to refresh token: ${i}`)}const s=await t.json();if(!s.success||!s.data?.tokens)throw new Error("Invalid refresh token response format");const{accessToken:n,refreshToken:o}=s.data.tokens;if(!O(n)||!O(o))throw new Error("Received invalid token structure from server");this.saveTokensToStorage(n,o),this.refreshAttempts=0,console.log("Token refresh successful");try{const{useAuthStore:a}=await se(async()=>{const{useAuthStore:c}=await Promise.resolve().then(()=>Xe);return{useAuthStore:c}},void 0);a.getState().setTokens({accessToken:n,refreshToken:o})}catch(a){console.warn("Failed to update auth store with new tokens:",a)}}catch(t){throw console.error("Token refresh failed:",t),this.clearTokens(),t}}async get(t){return this.request(t,{method:"GET"})}async post(t,s){return this.request(t,{method:"POST",body:s instanceof FormData?s:s?JSON.stringify(s):void 0})}async put(t,s){return this.request(t,{method:"PUT",body:s instanceof FormData?s:s?JSON.stringify(s):void 0})}async delete(t){return this.request(t,{method:"DELETE"})}setTokens(t,s){this.saveTokensToStorage(t,s)}reloadTokens(){this.loadTokensFromStorage()}forceSetTokens(t,s){console.log("Force setting tokens:",{hasAccessToken:!!t,hasRefreshToken:!!s}),this.accessToken=t,this.refreshToken=s}clearAuth(){this.clearTokens()}getTokenInfo(){if(!this.accessToken)return null;const t=Ue(this.accessToken);return t?{...t,hasRefreshToken:!!this.refreshToken,refreshAttempts:this.refreshAttempts,isRefreshing:this.isRefreshing}:null}isTokenValid(){return this.accessToken?O(this.accessToken)&&!X(this.accessToken):!1}async forceRefresh(){if(!this.refreshToken)throw new Error("No refresh token available");await this.refreshAccessToken()}}class ee extends Error{constructor(t,s,n){super(t),this.status=s,this.errors=n,this.name="ApiError"}}const j=new Jt,Ee=Object.freeze(Object.defineProperty({__proto__:null,ApiError:ee,HttpClient:Jt,httpClient:j},Symbol.toStringTag,{value:"Module"}));class Br{async login(t){const s=await j.post("/auth/login",t);if(s.success&&s.data)return console.log("Login successful, storing tokens:",{hasAccessToken:!!s.data.tokens.accessToken,hasRefreshToken:!!s.data.tokens.refreshToken,accessTokenLength:s.data.tokens.accessToken?.length}),j.setTokens(s.data.tokens.accessToken,s.data.tokens.refreshToken),s.data;throw new Error(s.message||"Login failed")}async register(t){const s=await j.post("/auth/register",t);if(s.success&&s.data)return j.setTokens(s.data.tokens.accessToken,s.data.tokens.refreshToken),s.data;throw new Error(s.message||"Registration failed")}async logout(){try{await j.post("/auth/logout")}catch(t){console.warn("Logout request failed:",t)}finally{j.clearAuth()}}async getCurrentUser(){const t=await j.get("/auth/me");if(t.success&&t.data)return t.data;throw new Error(t.message||"Failed to get user profile")}async forgotPassword(t){const s=await j.post("/auth/forgot-password",t);if(s.success&&s.data)return s.data;throw new Error(s.message||"Failed to send reset email")}async verifyOtp(t){const s=await j.post("/auth/verify-otp",t);if(!s.success)throw new Error(s.message||"OTP verification failed")}async resetPassword(t){const s=await j.post("/auth/reset-password",t);if(!s.success)throw new Error(s.message||"Password reset failed")}async changePassword(t){const s=await j.post("/auth/change-password",t);if(!s.success)throw new Error(s.message||"Password change failed")}isAuthenticated(){try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t);return s.state?.isAuthenticated===!0&&!!s.state?.tokens?.accessToken}}catch(t){console.warn("Failed to check authentication status:",t)}return!1}async updateProfile(t){const s=await j.put("/auth/profile",t);if(s.success&&s.data)return s.data.user;throw new Error(s.message||"Failed to update profile")}}const he=new Br,re={all:["auth"],me:()=>[...re.all,"me"]},Kr=()=>{const{isAuthenticated:r}=T();return de({queryKey:re.me(),queryFn:he.getCurrentUser,enabled:r,staleTime:5*60*1e3,retry:(t,s)=>s?.status===401?!1:t<3})},Qr=()=>{const r=A(),{setUser:t,setAuthenticated:s,setTokens:n}=T();return M({mutationFn:o=>he.login(o),onSuccess:o=>{console.log("Login mutation onSuccess, received data:",{hasUser:!!o.user,hasTokens:!!o.tokens,accessTokenLength:o.tokens?.accessToken?.length}),t({id:o.user.id,name:o.user.username,email:o.user.email,avatar:o.user.avatarUrl}),s(!0),n(o.tokens),j.forceSetTokens(o.tokens.accessToken,o.tokens.refreshToken),j.setTokens(o.tokens.accessToken,o.tokens.refreshToken),r.setQueryData(re.me(),o.user),r.invalidateQueries({queryKey:re.all})},onError:o=>{console.error("Login failed:",o)}})},Hr=()=>{const r=A(),{setUser:t,setAuthenticated:s,setTokens:n}=T();return M({mutationFn:o=>he.register(o),onSuccess:o=>{t({id:o.user.id,name:o.user.username,email:o.user.email,avatar:o.user.avatarUrl}),s(!0),n(o.tokens),r.setQueryData(re.me(),o.user),r.invalidateQueries({queryKey:re.all})},onError:o=>{console.error("Registration failed:",o)}})},Jr=()=>{const r=A(),{setUser:t}=T();return M({mutationFn:s=>he.updateProfile(s),onSuccess:s=>{t({id:s.id,name:s.username,email:s.email,avatar:s.avatarUrl}),r.setQueryData(re.me(),s),r.invalidateQueries({queryKey:re.all}),U.success("Profile updated successfully!")},onError:s=>{console.error("Profile update failed:",s),U.error(s.message||"Failed to update profile")}})},Wr=()=>M({mutationFn:r=>he.changePassword(r),onSuccess:()=>{U.success("Password changed successfully!")},onError:r=>{console.error("Password change failed:",r),U.error(r.message||"Failed to change password")}}),Wt=()=>{const r=A(),{logout:t}=T();return M({mutationFn:he.logout,onSuccess:()=>{t(),r.clear()},onError:s=>{console.error("Logout failed:",s),t(),r.clear()}})};function ue({showBackButton:r=!1,title:t,transparent:s=!1}){const n=bs(),{isAuthenticated:o,user:a}=T(),i=Wt(),c=u=>n.pathname===u,m=()=>{i.mutate()};return e.jsxDEV("nav",{className:`${s?"bg-white/95 backdrop-blur-sm":"bg-white"} shadow-sm border-b sticky top-0 z-50`,children:[e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"flex justify-between items-center h-16",children:[e.jsxDEV("div",{className:"flex items-center",children:[r&&e.jsxDEV(E,{to:"/",className:"mr-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:35,columnNumber:19},this),"Back"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:34,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:33,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:"MS"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:43,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:42,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:41,columnNumber:15},this),e.jsxDEV("div",{className:"ml-3",children:e.jsxDEV("h1",{className:"text-xl font-semibold text-gray-900",children:t||"MERN Stack"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:47,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:40,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:31,columnNumber:11},this),e.jsxDEV("div",{className:"hidden md:block",children:e.jsxDEV("div",{className:"ml-10 flex items-baseline space-x-4",children:[e.jsxDEV(E,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:[e.jsxDEV(Ut,{className:"w-4 h-4 inline mr-1"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:64,columnNumber:17},this),"Home"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:56,columnNumber:15},this),e.jsxDEV(E,{to:"/todo",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/todo")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Todo"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:67,columnNumber:15},this),e.jsxDEV(E,{to:"/chat",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/chat")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Chat"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:77,columnNumber:15},this),e.jsxDEV(E,{to:"/profile",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/profile")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:55,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:o?e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Welcome, ",a?.name]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:103,columnNumber:17},this),e.jsxDEV(E,{to:"/profile",children:e.jsxDEV(d,{variant:"outline",size:"sm",children:[e.jsxDEV(Ds,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:108,columnNumber:21},this),"Profile"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:107,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:106,columnNumber:17},this),e.jsxDEV(d,{variant:"outline",size:"sm",onClick:m,disabled:i.isPending,children:[e.jsxDEV(ot,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:118,columnNumber:19},this),i.isPending?"Signing Out...":"Sign Out"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:112,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:102,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(E,{to:"/login",search:{redirect:"/"},children:e.jsxDEV(d,{variant:"outline",size:"sm",children:"Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:125,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:124,columnNumber:17},this),e.jsxDEV(E,{to:"/register",children:e.jsxDEV(d,{size:"sm",children:"Get Started"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:130,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:129,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:123,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:30,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:29,columnNumber:7},this),e.jsxDEV("div",{className:"md:hidden",children:e.jsxDEV("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[e.jsxDEV(E,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Home"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:143,columnNumber:11},this),e.jsxDEV(E,{to:"/todo",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/todo")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Todo"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV(E,{to:"/chat",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/chat")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Chat"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV(E,{to:"/profile",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/profile")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:173,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:142,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:141,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/Navigation.tsx",lineNumber:28,columnNumber:5},this)}class Yr{async getTodos(t){const s=new URLSearchParams;t?.page&&s.append("page",t.page.toString()),t?.limit&&s.append("limit",t.limit.toString()),t?.status&&s.append("status",t.status),t?.sortBy&&s.append("sortBy",t.sortBy),t?.sortOrder&&s.append("sortOrder",t.sortOrder);const n=s.toString(),o=`/todos${n?`?${n}`:""}`,a=await j.get(o);if(a.success&&a.data)return a.data;throw new Error(a.message||"Failed to fetch todos")}async getTodoById(t){const s=await j.get(`/todos/${t}`);if(s.success&&s.data)return s.data;throw new Error(s.message||"Failed to fetch todo")}async createTodo(t){const s=await j.post("/todos",t);if(s.success&&s.data)return s.data.todo;throw new Error(s.message||"Failed to create todo")}async updateTodo(t,s){const n=await j.put(`/todos/${t}`,s);if(n.success&&n.data)return n.data.todo;throw new Error(n.message||"Failed to update todo")}async updateTodoStatus(t,s){const n=await j.put(`/todos/${t}/status`,s);if(n.success&&n.data)return n.data.todo;throw new Error(n.message||"Failed to update todo status")}async deleteTodo(t){const s=await j.delete(`/todos/${t}`);if(!s.success)throw new Error(s.message||"Failed to delete todo")}}const ye=new Yr,z={all:["todos"],lists:()=>[...z.all,"list"],list:r=>[...z.lists(),r],details:()=>[...z.all,"detail"],detail:r=>[...z.details(),r]},Gr=r=>de({queryKey:z.list(r),queryFn:()=>ye.getTodos(r),staleTime:30*1e3,retry:(t,s)=>s?.status===401?!1:t<3}),Xr=()=>{const r=A();return M({mutationFn:t=>ye.createTodo(t),onSuccess:t=>{r.invalidateQueries({queryKey:z.lists()}),r.setQueryData(z.detail(t.id),t),U.success("Todo created successfully!")},onError:t=>{console.error("Failed to create todo:",t),U.error(t.message||"Failed to create todo")}})},Zr=()=>{const r=A();return M({mutationFn:({id:t,data:s})=>ye.updateTodo(t,s),onSuccess:t=>{r.setQueryData(z.detail(t.id),t),r.invalidateQueries({queryKey:z.lists()}),U.success("Todo updated successfully!")},onError:t=>{console.error("Failed to update todo:",t),U.error(t.message||"Failed to update todo")}})},en=()=>{const r=A();return M({mutationFn:({id:t,data:s})=>ye.updateTodoStatus(t,s),onSuccess:t=>{r.setQueryData(z.detail(t.id),t),r.invalidateQueries({queryKey:z.lists()}),U.success("Todo status updated successfully!")},onError:t=>{console.error("Failed to update todo status:",t),U.error(t.message||"Failed to update todo status")}})},tn=()=>{const r=A();return M({mutationFn:t=>ye.deleteTodo(t),onSuccess:(t,s)=>{r.removeQueries({queryKey:z.detail(s)}),r.invalidateQueries({queryKey:z.lists()}),U.success("Todo deleted successfully!")},onError:t=>{console.error("Failed to delete todo:",t),U.error(t.message||"Failed to delete todo")}})};var I=(r=>(r.INITIAL="initial",r.TODO="todo",r.DOING="doing",r.REVIEW="review",r.DONE="done",r.KEEPING="keeping",r.CANCELLED="cancelled",r))(I||{});const sn=({size:r="md",className:t})=>{const s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return e.jsxDEV(Y,{className:p("animate-spin",s[r],t)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:21,columnNumber:5},void 0)},rn=({message:r="Loading...",size:t="md",className:s})=>e.jsxDEV("div",{className:p("flex items-center justify-center py-8",s),children:[e.jsxDEV(sn,{size:t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:44,columnNumber:7},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-600",children:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:43,columnNumber:5},void 0),nn=({message:r="Something went wrong",error:t,onRetry:s,className:n})=>e.jsxDEV("div",{className:p("text-center py-8 text-red-600",n),children:[e.jsxDEV("p",{className:"font-medium",children:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:65,columnNumber:7},void 0),t?.message&&e.jsxDEV("p",{className:"text-sm mt-2 text-red-500",children:t.message},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:67,columnNumber:9},void 0),s&&e.jsxDEV("button",{onClick:s,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Try Again"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:70,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:64,columnNumber:5},void 0),on=({message:r="No data found",description:t,icon:s,action:n,className:o})=>e.jsxDEV("div",{className:p("text-center py-8 text-gray-500",o),children:[s&&e.jsxDEV("div",{className:"mb-4",children:s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:98,columnNumber:16},void 0),e.jsxDEV("p",{className:"font-medium",children:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:99,columnNumber:7},void 0),t&&e.jsxDEV("p",{className:"text-sm mt-2",children:t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:101,columnNumber:9},void 0),n&&e.jsxDEV("div",{className:"mt-4",children:n},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:104,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/loading.tsx",lineNumber:97,columnNumber:5},void 0);function Se({...r}){return e.jsxDEV(Es,{"data-slot":"alert-dialog",...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:10,columnNumber:10},this)}function an({...r}){return e.jsxDEV(ks,{"data-slot":"alert-dialog-trigger",...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:17,columnNumber:5},this)}function ln({...r}){return e.jsxDEV(Vs,{"data-slot":"alert-dialog-portal",...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:25,columnNumber:5},this)}function cn({className:r,...t}){return e.jsxDEV(Rs,{"data-slot":"alert-dialog-overlay",className:p("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:34,columnNumber:5},this)}function Te({className:r,...t}){return e.jsxDEV(ln,{children:[e.jsxDEV(cn,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV(Us,{"data-slot":"alert-dialog-content",className:p("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:52,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:50,columnNumber:5},this)}function Le({className:r,...t}){return e.jsxDEV("div",{"data-slot":"alert-dialog-header",className:p("flex flex-col gap-2 text-center sm:text-left",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:69,columnNumber:5},this)}function Pe({className:r,...t}){return e.jsxDEV("div",{"data-slot":"alert-dialog-footer",className:p("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:82,columnNumber:5},this)}function Ae({className:r,...t}){return e.jsxDEV(ys,{"data-slot":"alert-dialog-title",className:p("text-lg font-semibold",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:98,columnNumber:5},this)}function Me({className:r,...t}){return e.jsxDEV(qs,{"data-slot":"alert-dialog-description",className:p("text-muted-foreground text-sm",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:111,columnNumber:5},this)}function Ie({className:r,...t}){return e.jsxDEV(ws,{className:p(lt(),r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:124,columnNumber:5},this)}function Fe({className:r,...t}){return e.jsxDEV(js,{className:p(lt({variant:"outline"}),r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:136,columnNumber:5},this)}function mn({open:r,onOpenChange:t,onConfirm:s,title:n="Are you sure?",description:o="This action cannot be undone.",isLoading:a=!1}){return e.jsxDEV(Se,{open:r,onOpenChange:t,children:e.jsxDEV(Te,{children:[e.jsxDEV(Le,{children:[e.jsxDEV(Ae,{className:"flex items-center gap-2",children:[e.jsxDEV(be,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:36,columnNumber:13},this),n]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:35,columnNumber:11},this),e.jsxDEV(Me,{children:o},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:39,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:34,columnNumber:9},this),e.jsxDEV(Pe,{children:[e.jsxDEV(Fe,{disabled:a,children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV(Ie,{onClick:s,disabled:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:54,columnNumber:17},this),"Deleting..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:53,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:59,columnNumber:17},this),"Delete"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:33,columnNumber:7},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:32,columnNumber:5},this)}const un=G("/todo")({beforeLoad:({context:r,location:t})=>{if(!T.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:t.href}})},component:dn});function dn(){const[r,t]=l.useState(""),[s,n]=l.useState(""),[o,a]=l.useState(""),[i,c]=l.useState(void 0),[m,u]=l.useState("createdAt"),[v,h]=l.useState("desc"),[g,q]=l.useState(null),[R,w]=l.useState(""),[x,y]=l.useState(!1),[N,C]=l.useState(null),f=l.useMemo(()=>({status:i,sortBy:m,sortOrder:v,limit:50}),[i,m,v]),{data:b,isLoading:$,error:Z,refetch:ne}=Gr(f),V=Xr(),je=Zr(),we=en(),ze=tn(),is=()=>r.trim()?r.trim().length<3?(a("Title must be at least 3 characters long"),!1):r.trim().length>200?(a("Title must be less than 200 characters"),!1):s.trim().length>2e3?(a("Content must be less than 2000 characters"),!1):(a(""),!0):(a("Title is required"),!1),as=D=>{D.preventDefault(),is()&&V.mutate({title:r.trim(),content:s.trim()||r.trim()},{onSuccess:()=>{t(""),n(""),a("")},onError:F=>{a(F.message||"Failed to create todo")}})},ls=(D,F)=>{we.mutate({id:D,data:{status:F}})},ct=(D,F)=>{q(D),w(F)},mt=D=>{R.trim()&&R.trim()!==""&&je.mutate({id:D,data:{title:R.trim()}},{onSuccess:()=>{q(null),w("")},onError:F=>{console.error("Failed to update todo title:",F)}})},ut=()=>{q(null),w("")},cs=D=>{C(D),y(!0)},ms=()=>{N&&ze.mutate(N,{onSuccess:()=>{y(!1),C(null)},onError:()=>{}})};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"Todo App"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Todo Manager"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600",children:"Organize your tasks and boost productivity"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:154,columnNumber:11},this),e.jsxDEV(K,{className:"mb-6",children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Add New Task"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:161,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV(Q,{children:e.jsxDEV("form",{onSubmit:as,className:"space-y-4",children:[(o||V.error)&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o||V.error?.message||"Failed to create todo"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:165,columnNumber:65},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(L,{placeholder:"Enter task title...",value:r,onChange:D=>{t(D.target.value),o&&a("")},className:"flex-1",required:!0,maxLength:200},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:169,columnNumber:17},this),e.jsxDEV(d,{type:"submit",disabled:V.isPending||!r.trim(),children:V.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:174,columnNumber:51},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(yt,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:175,columnNumber:23},this),"Add Task"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:174,columnNumber:98},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:173,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV(L,{placeholder:"Enter task description (optional)...",value:s,onChange:D=>n(D.target.value),maxLength:2e3},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:180,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Title: ",r.length,"/200 characters",s&&` ‚Ä¢ Description: ${s.length}/2000 characters`]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:164,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:163,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:159,columnNumber:9},this),e.jsxDEV(K,{children:[e.jsxDEV(H,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(J,{children:"Your Tasks"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:193,columnNumber:17},this),b&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:[b.total," total ‚Ä¢ ",b.todos.filter(D=>D.status===I.DONE).length," completed"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:194,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:192,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("select",{value:i||"",onChange:D=>c(D.target.value||void 0),className:"px-2 py-1 border rounded",children:[e.jsxDEV("option",{value:"",children:"All Status"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:200,columnNumber:19},this),e.jsxDEV("option",{value:I.INITIAL,children:"Initial"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:201,columnNumber:19},this),e.jsxDEV("option",{value:I.TODO,children:"Todo"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:202,columnNumber:19},this),e.jsxDEV("option",{value:I.DOING,children:"Doing"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:203,columnNumber:19},this),e.jsxDEV("option",{value:I.REVIEW,children:"Review"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:204,columnNumber:19},this),e.jsxDEV("option",{value:I.DONE,children:"Done"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:205,columnNumber:19},this),e.jsxDEV("option",{value:I.KEEPING,children:"Keeping"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:206,columnNumber:19},this),e.jsxDEV("option",{value:I.CANCELLED,children:"Cancelled"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:207,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("select",{value:`${m}-${v}`,onChange:D=>{const[F,us]=D.target.value.split("-");u(F),h(us)},className:"px-2 py-1 border rounded",children:[e.jsxDEV("option",{value:"createdAt-desc",children:"Newest First"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:214,columnNumber:19},this),e.jsxDEV("option",{value:"createdAt-asc",children:"Oldest First"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:215,columnNumber:19},this),e.jsxDEV("option",{value:"title-asc",children:"Title A-Z"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:216,columnNumber:19},this),e.jsxDEV("option",{value:"title-desc",children:"Title Z-A"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:217,columnNumber:19},this),e.jsxDEV("option",{value:"status-asc",children:"Status A-Z"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:218,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:198,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:191,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:190,columnNumber:11},this),e.jsxDEV(Q,{children:$?e.jsxDEV(rn,{message:"Loading tasks..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:26},this):Z?e.jsxDEV(nn,{message:"Failed to load tasks",error:Z,onRetry:()=>ne()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:80},this):b?.todos&&b.todos.length>0?e.jsxDEV("div",{className:"space-y-3",children:b.todos.map(D=>e.jsxDEV("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsxDEV("select",{value:D.status,onChange:F=>ls(D.id,F.target.value),disabled:we.isPending,className:"px-2 py-1 border rounded text-xs min-w-[100px]",children:[e.jsxDEV("option",{value:I.INITIAL,children:"Initial"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:228,columnNumber:23},this),e.jsxDEV("option",{value:I.TODO,children:"Todo"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:229,columnNumber:23},this),e.jsxDEV("option",{value:I.DOING,children:"Doing"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:230,columnNumber:23},this),e.jsxDEV("option",{value:I.REVIEW,children:"Review"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:231,columnNumber:23},this),e.jsxDEV("option",{value:I.DONE,children:"Done"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:232,columnNumber:23},this),e.jsxDEV("option",{value:I.KEEPING,children:"Keeping"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:233,columnNumber:23},this),e.jsxDEV("option",{value:I.CANCELLED,children:"Cancelled"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:234,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:227,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1",children:[g===D.id?e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(L,{value:R,onChange:F=>w(F.target.value),className:"text-sm",onKeyDown:F=>{F.key==="Enter"?mt(D.id):F.key==="Escape"&&ut()},autoFocus:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:240,columnNumber:27},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>mt(D.id),disabled:je.isPending,children:e.jsxDEV(De,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:248,columnNumber:29},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:247,columnNumber:27},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:ut,children:e.jsxDEV(it,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:251,columnNumber:29},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:250,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:239,columnNumber:50},this):e.jsxDEV("div",{className:`text-sm font-medium cursor-pointer ${D.status===I.DONE?"line-through text-gray-500":"text-gray-900"}`,onClick:()=>ct(D.id,D.title),children:D.title},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:253,columnNumber:34},this),D.content!==D.title&&e.jsxDEV("p",{className:"text-xs text-gray-600 mt-1",children:D.content},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:257,columnNumber:55},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:["Created: ",new Date(D.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:258,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:237,columnNumber:21},this),g!==D.id&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(d,{variant:"outline",size:"sm",onClick:()=>ct(D.id,D.title),children:e.jsxDEV(Cs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:265,columnNumber:27},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:264,columnNumber:25},this),e.jsxDEV(d,{variant:"destructive",size:"sm",onClick:()=>cs(D.id),disabled:ze.isPending,children:e.jsxDEV(be,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:268,columnNumber:27},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:267,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:263,columnNumber:49},this)]},D.id,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:225,columnNumber:46},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:217},this):e.jsxDEV(on,{message:"No tasks yet",description:"Create your first task above to get started!",icon:e.jsxDEV(Ss,{className:"w-12 h-12 mx-auto text-gray-400"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:272,columnNumber:124},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:272,columnNumber:24},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:223,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:189,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:153,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:152,columnNumber:7},this),e.jsxDEV(mn,{open:x,onOpenChange:D=>{y(D),D||C(null)},onConfirm:ms,title:"Delete Todo",description:"Are you sure you want to delete this todo? This action cannot be undone.",isLoading:ze.isPending},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:279,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/todo.tsx",lineNumber:150,columnNumber:10},this)}const hn=G("/register")({component:xn});function xn(){const r=ae(),t=Hr(),[s,n]=l.useState({username:"",email:"",password:"",confirmPassword:""}),[o,a]=l.useState(""),i=async c=>{if(c.preventDefault(),a(""),s.password!==s.confirmPassword){a("Passwords do not match");return}t.mutate({username:s.username,email:s.email,password:s.password},{onSuccess:()=>{r({to:"/"})},onError:m=>{a(m.message||"Registration failed. Please try again.")}})};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(E,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:48,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:47,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:46,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Sign Up"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV(oe,{children:"Create a new account to get started"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV(Q,{children:[e.jsxDEV("form",{onSubmit:i,className:"space-y-4",children:[(o||t.error)&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o||t.error?.message||"Registration failed. Please try again."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:60,columnNumber:51},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"username",children:"Username"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:65,columnNumber:15},this),e.jsxDEV(L,{id:"username",type:"text",placeholder:"Enter your username",value:s.username,onChange:c=>n({...s,username:c.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:64,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:73,columnNumber:15},this),e.jsxDEV(L,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:c=>n({...s,email:c.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:74,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV(L,{id:"password",type:"password",placeholder:"Enter your password",value:s.password,onChange:c=>n({...s,password:c.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"confirmPassword",children:"Confirm Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV(L,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:c=>n({...s,confirmPassword:c.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:88,columnNumber:13},this),e.jsxDEV(d,{type:"submit",className:"w-full",disabled:t.isPending,children:t.isPending?"Creating Account...":"Sign Up"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsxDEV(E,{to:"/login",className:"text-blue-600 hover:underline",search:{redirect:"/"},children:"Sign in"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:53,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/register.tsx",lineNumber:44,columnNumber:10},this)}const le=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(qt,{ref:s,className:p("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/avatar.tsx",lineNumber:10,columnNumber:3},void 0));le.displayName=qt.displayName;const ce=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(jt,{ref:s,className:p("aspect-square h-full w-full",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/avatar.tsx",lineNumber:25,columnNumber:3},void 0));ce.displayName=jt.displayName;const me=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(wt,{ref:s,className:p("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/avatar.tsx",lineNumber:37,columnNumber:3},void 0));me.displayName=wt.displayName;function Nn({onUpload:r,accept:t="image/*",maxSize:s=5,children:n,className:o="",disabled:a=!1}){const i=l.useRef(null),[c,m]=l.useState(!1),u=async h=>{const g=h.target.files?.[0];if(g){if(g.size>s*1024*1024){U.error(`File size must be less than ${s}MB`);return}if(t&&t!=="*/*"&&!t.split(",").map(w=>w.trim()).some(w=>{if(w.includes("*")){const x=w.split("/")[0];return g.type.startsWith(x+"/")}return g.type===w})){U.error("Invalid file type");return}m(!0);try{const q=await r(g);U.success("File uploaded successfully!")}catch(q){U.error(q.message||"Upload failed")}finally{m(!1),i.current&&(i.current.value="")}}},v=()=>{!a&&!c&&i.current?.click()};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("input",{ref:i,type:"file",accept:t,onChange:u,className:"hidden",disabled:a||c},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:77,columnNumber:7},this),n?e.jsxDEV("div",{onClick:v,className:`cursor-pointer ${o}`,children:n},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:87,columnNumber:9},this):e.jsxDEV(d,{type:"button",variant:"outline",onClick:v,disabled:a||c,className:o,children:c?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:100,columnNumber:15},this),"Uploading..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:99,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ls,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:105,columnNumber:15},this),"Upload File"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:104,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:76,columnNumber:5},this)}function fn({onUpload:r,disabled:t=!1,className:s=""}){return e.jsxDEV(Nn,{onUpload:r,accept:"image/*",maxSize:2,disabled:t,className:s,children:e.jsxDEV(d,{type:"button",size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full w-8 h-8 p-0",disabled:t,children:e.jsxDEV(Ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:137,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:130,columnNumber:7},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/file-upload.tsx",lineNumber:123,columnNumber:5},this)}class pn{async uploadFile(t){if(!t.type.startsWith("image/"))throw new Error("Only image files are allowed");if(t.size>5*1024*1024)throw new Error("File size must be less than 5MB");const s=new FormData;s.append("file",t);try{const n=await j.post("/upload/image",s);if(n.success&&n.data)return n.data.file.url;throw new Error(n.message||"Upload failed")}catch(n){throw new Error(n.message||"Upload failed")}}async uploadAvatar(t){if(!t.type.startsWith("image/"))throw new Error("Only image files are allowed for avatars");if(t.size>2*1024*1024)throw new Error("Avatar file size must be less than 2MB");const s=new FormData;s.append("file",t);try{const n=await j.post("/upload/avatar",s);if(n.success&&n.data)return n.data.avatarUrl||n.data.file.url;throw new Error(n.message||"Avatar upload failed")}catch(n){throw new Error(n.message||"Avatar upload failed")}}}const gn=new pn,qe=Ms,Yt=Is,vn=Ps,Gt=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(Vt,{ref:s,className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:19,columnNumber:3},void 0));Gt.displayName=Vt.displayName;const xe=l.forwardRef(({className:r,children:t,...s},n)=>e.jsxDEV(vn,{children:[e.jsxDEV(Gt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:35,columnNumber:5},void 0),e.jsxDEV(Rt,{ref:n,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s,children:[t,e.jsxDEV(As,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsxDEV(it,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:46,columnNumber:9},void 0),e.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:47,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:36,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:34,columnNumber:3},void 0));xe.displayName=Rt.displayName;const Ne=({className:r,...t})=>e.jsxDEV("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:58,columnNumber:3},void 0);Ne.displayName="DialogHeader";const $e=({className:r,...t})=>e.jsxDEV("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:72,columnNumber:3},void 0);$e.displayName="DialogFooter";const fe=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(kt,{ref:s,className:p("text-lg font-semibold leading-none tracking-tight",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:86,columnNumber:3},void 0));fe.displayName=kt.displayName;const pe=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(Ct,{ref:s,className:p("text-sm text-muted-foreground",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dialog.tsx",lineNumber:101,columnNumber:3},void 0));pe.displayName=Ct.displayName;function bn({open:r,onOpenChange:t,onSubmit:s,isLoading:n=!1}){const[o,a]=l.useState(""),[i,c]=l.useState(""),[m,u]=l.useState(""),[v,h]=l.useState(!1),[g,q]=l.useState(!1),[R,w]=l.useState(!1),[x,y]=l.useState({}),N=()=>{const b={};return o||(b.currentPassword="Current password is required"),i?i.length<8?b.newPassword="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(i)||(b.newPassword="Password must contain uppercase, lowercase, and number"):b.newPassword="New password is required",m?i!==m&&(b.confirmPassword="Passwords do not match"):b.confirmPassword="Please confirm your new password",o===i&&(b.newPassword="New password must be different from current password"),y(b),Object.keys(b).length===0},C=async b=>{if(b.preventDefault(),!!N())try{await s({currentPassword:o,newPassword:i}),a(""),c(""),u(""),y({}),U.success("Password changed successfully!"),t(!1)}catch($){U.error($.message||"Failed to change password")}},f=()=>{n||(a(""),c(""),u(""),y({}),t(!1))};return e.jsxDEV(qe,{open:r,onOpenChange:f,children:e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(He,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:102,columnNumber:13},this),"Change Password"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:101,columnNumber:11},this),e.jsxDEV(pe,{children:"Enter your current password and choose a new secure password."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:105,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:100,columnNumber:9},this),e.jsxDEV("form",{onSubmit:C,className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"currentPassword",children:"Current Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(L,{id:"currentPassword",type:v?"text":"password",value:o,onChange:b=>{a(b.target.value),x.currentPassword&&y({...x,currentPassword:""})},placeholder:"Enter current password",disabled:n,className:x.currentPassword?"border-red-500":""},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!v),disabled:n,children:v?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:138,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:140,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:129,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:114,columnNumber:13},this),x.currentPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.currentPassword},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:145,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:112,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"newPassword",children:"New Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(L,{id:"newPassword",type:g?"text":"password",value:i,onChange:b=>{c(b.target.value),x.newPassword&&y({...x,newPassword:""})},placeholder:"Enter new password",disabled:n,className:x.newPassword?"border-red-500":""},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:153,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!g),disabled:n,children:g?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:176,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:178,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:152,columnNumber:13},this),x.newPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.newPassword},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:183,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"confirmPassword",children:"Confirm New Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(L,{id:"confirmPassword",type:R?"text":"password",value:m,onChange:b=>{u(b.target.value),x.confirmPassword&&y({...x,confirmPassword:""})},placeholder:"Confirm new password",disabled:n,className:x.confirmPassword?"border-red-500":""},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:191,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!R),disabled:n,children:R?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:214,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:216,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:205,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:190,columnNumber:13},this),x.confirmPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.confirmPassword},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:221,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:188,columnNumber:11},this),e.jsxDEV($e,{children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:f,disabled:n,children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:226,columnNumber:13},this),e.jsxDEV(d,{type:"submit",disabled:n,children:n?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:237,columnNumber:19},this),"Changing..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:236,columnNumber:17},this):"Change Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:110,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:99,columnNumber:7},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:98,columnNumber:5},this)}const Dn=G("/profile")({beforeLoad:({location:r})=>{if(!T.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:r.href}})},component:En});function En(){const{data:r,isLoading:t,error:s}=Kr(),n=Jr(),o=Wt(),a=Wr(),[i,c]=l.useState({name:"",email:"",bio:"Software developer passionate about creating amazing user experiences.",avatar:""}),[m,u]=l.useState(""),[v,h]=l.useState(!1);bt.useEffect(()=>{if(r){const N=localStorage.getItem(`user_bio_${r.id}`)||"Software developer passionate about creating amazing user experiences.";c({name:r.username||"",email:r.email||"",bio:N,avatar:r.avatarUrl||"/api/placeholder/120/120"})}},[r]);const g=()=>i.name.trim()?i.name.trim().length<3?(u("Name must be at least 3 characters long"),!1):i.name.trim().length>50?(u("Name must be less than 50 characters"),!1):/^[a-zA-Z0-9_-]+$/.test(i.name.trim())?i.avatar.trim()&&!q(i.avatar.trim())?(u("Avatar URL must be a valid URL"),!1):(u(""),!0):(u("Name can only contain letters, numbers, underscores, and hyphens"),!1):(u("Name is required"),!1),q=N=>{try{return new URL(N),!0}catch{return!1}},R=()=>{if(!g())return;const N={};let C=!1;if(i.name!==r?.username&&(N.username=i.name.trim(),C=!0),i.avatar!==r?.avatarUrl&&(N.avatarUrl=i.avatar.trim()||void 0,C=!0),r){const f=localStorage.getItem(`user_bio_${r.id}`)||"Software developer passionate about creating amazing user experiences.";i.bio!==f&&(localStorage.setItem(`user_bio_${r.id}`,i.bio),C=!0,U.success("Bio updated successfully!"))}if(Object.keys(N).length===0)if(C){u("");return}else{u("No changes to save");return}n.mutate(N,{onSuccess:()=>{u("")},onError:f=>{u(f.message||"Failed to update profile")}})},w=async N=>{try{const C=await gn.uploadAvatar(N);return c({...i,avatar:C}),U.success("Avatar uploaded successfully!"),C}catch(C){throw U.error(C.message||"Failed to upload avatar"),C}},x=()=>{o.mutate()},y=async N=>{await a.mutateAsync(N)};return t?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(Y,{className:"w-6 h-6 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:170,columnNumber:15},this),e.jsxDEV("span",{className:"ml-2",children:"Loading profile..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:171,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:168,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:167,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:165,columnNumber:12},this):s?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:179,columnNumber:9},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxDEV("div",{className:"text-center py-8 text-red-600",children:[e.jsxDEV("p",{children:"Failed to load profile. Please try again."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm mt-2",children:s.message},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:184,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:182,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:181,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:180,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:178,columnNumber:12},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:195,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600",children:"Manage your account settings and preferences"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:196,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:194,columnNumber:11},this),e.jsxDEV(K,{children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Profile Information"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:201,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV(Q,{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex flex-col items-center space-y-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(le,{className:"w-24 h-24",children:[e.jsxDEV(ce,{src:i.avatar},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:208,columnNumber:21},this),e.jsxDEV(me,{className:"text-lg",children:i.name.split(" ").map(N=>N[0]).join("")},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:209,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:207,columnNumber:19},this),e.jsxDEV(fn,{onUpload:w,disabled:n.isPending},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:213,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:206,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:205,columnNumber:15},this),m&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:m},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:218,columnNumber:35},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"name",children:"Username"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:225,columnNumber:19},this),e.jsxDEV(L,{id:"name",value:i.name,onChange:N=>{c({...i,name:N.target.value}),m&&u("")},placeholder:"Enter your username",maxLength:50},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:226,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Username can only contain letters, numbers, underscores, and hyphens"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:233,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:224,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:239,columnNumber:19},this),e.jsxDEV(L,{id:"email",type:"email",value:i.email,disabled:!0,className:"bg-gray-50"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:240,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:241,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:238,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"avatar",children:"Avatar URL"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:247,columnNumber:19},this),e.jsxDEV(L,{id:"avatar",value:i.avatar,onChange:N=>{c({...i,avatar:N.target.value}),m&&u("")},placeholder:"https://example.com/avatar.jpg"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:248,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Enter a valid URL for your avatar image"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:255,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:246,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"bio",children:"Bio"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:261,columnNumber:19},this),e.jsxDEV("textarea",{id:"bio",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:i.bio,onChange:N=>c({...i,bio:N.target.value}),placeholder:"Tell us about yourself...",maxLength:500},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:262,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:[i.bio.length,"/500 characters ‚Ä¢ Bio is saved locally"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:266,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:260,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end pt-4",children:e.jsxDEV(d,{onClick:R,disabled:n.isPending,className:"flex items-center gap-2",children:[n.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:275,columnNumber:54},this):e.jsxDEV(St,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:275,columnNumber:101},this),n.isPending?"Saving...":"Save Changes"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:274,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:273,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:203,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV(K,{className:"mt-6",children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Account Settings"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:285,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:284,columnNumber:13},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV(d,{variant:"outline",className:"w-full",onClick:()=>h(!0),children:"Change Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Privacy Settings"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:291,columnNumber:15},this),e.jsxDEV(d,{variant:"outline",className:"w-full flex items-center gap-2",onClick:x,disabled:o.isPending,children:[o.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:295,columnNumber:45},this):e.jsxDEV(ot,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:295,columnNumber:92},this),"Sign Out"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV(d,{variant:"destructive",className:"w-full",children:"Delete Account"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:298,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:283,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:192,columnNumber:7},this),e.jsxDEV(bn,{open:v,onOpenChange:h,onSubmit:y,isLoading:a.isPending},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:307,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/profile.tsx",lineNumber:190,columnNumber:10},this)}const Un=G("/login")({validateSearch:r=>({redirect:r.redirect||"/"}),component:yn});function yn(){const r=ae(),t=Et({from:"/login"}),s=Qr(),[n,o]=l.useState({email:"",password:""}),a=async i=>{i.preventDefault(),s.mutate(n,{onSuccess:()=>{r({to:t.redirect})},onError:c=>{console.error("Login error:",c)}})};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(E,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:42,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:41,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:40,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(K,{className:"w-full max-w-md bg-blue-50 border-blue-200",children:e.jsxDEV(Q,{className:"p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"Demo Account"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:52,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-blue-700 mb-3",children:"Use these credentials to test the application:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:53,columnNumber:15},this),e.jsxDEV("div",{className:"bg-white p-3 rounded border text-left",children:[e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Email:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:57,columnNumber:40},this)," john@example.com"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:57,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Password:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:58,columnNumber:40},this)," Password123"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:58,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:56,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:51,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:50,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV(oe,{children:"Sign in to your account to continue"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:65,columnNumber:11},this),e.jsxDEV(Q,{children:[e.jsxDEV("form",{onSubmit:a,className:"space-y-4",children:[s.error&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:s.error.message||"Login failed. Please try again."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:73,columnNumber:37},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:78,columnNumber:15},this),e.jsxDEV(L,{id:"email",type:"email",placeholder:"demo@example.com",value:n.email,onChange:i=>o({...n,email:i.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:79,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:86,columnNumber:15},this),e.jsxDEV(L,{id:"password",type:"password",placeholder:"password",value:n.password,onChange:i=>o({...n,password:i.target.value}),required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:85,columnNumber:13},this),e.jsxDEV(d,{type:"submit",className:"w-full",disabled:s.isPending,children:s.isPending?"Signing In...":"Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:72,columnNumber:11},this),e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV(E,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsxDEV(E,{to:"/register",className:"text-blue-600 hover:underline",children:"Sign up"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:64,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:47,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/login.tsx",lineNumber:38,columnNumber:10},this)}const qn=G("/forgot-password")({component:jn});function jn(){return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(E,{to:"/login",search:{redirect:"/"},className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:17,columnNumber:11},this),"Back to Login"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:16,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:13,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Forgot Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:24,columnNumber:11},this),e.jsxDEV(oe,{children:"Enter your email to reset your password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:25,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:31,columnNumber:13},this),e.jsxDEV(L,{id:"email",type:"email",placeholder:"Enter your email",required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:32,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:30,columnNumber:11},this),e.jsxDEV(d,{className:"w-full",children:"Send Reset Link"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:34,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV(E,{to:"/login",search:{redirect:"/"},className:"text-sm text-blue-600 hover:underline",children:"Back to Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:38,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:37,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:22,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/forgot-password.tsx",lineNumber:11,columnNumber:10},this)}const wn=Re("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:r,variant:t,...s}){return e.jsxDEV("div",{className:p(wn({variant:t}),r),...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/badge.tsx",lineNumber:32,columnNumber:5},this)}class Vn{baseUrl="/chat";async getRooms(t=1,s=10,n="updated_at",o="desc"){const a=new URLSearchParams({page:t.toString(),limit:s.toString(),sortBy:n,sortOrder:o});return(await j.get(`${this.baseUrl}/rooms?${a.toString()}`)).data||{rooms:[],total:0,page:1,limit:10,totalPages:0}}async getRoom(t){return(await j.get(`${this.baseUrl}/rooms/${t}`)).data?.room||{}}async createRoom(t){return(await j.post(`${this.baseUrl}/rooms`,t)).data?.room||{}}async updateRoom(t,s){return(await j.put(`${this.baseUrl}/rooms/${t}`,s)).data?.room||{}}async deleteRoom(t){await j.delete(`${this.baseUrl}/rooms/${t}`)}async joinRoom(t){return(await j.post(`${this.baseUrl}/rooms/${t}/join`)).data?.room||{}}async leaveRoom(t){await j.post(`${this.baseUrl}/rooms/${t}/leave`)}async inviteUsers(t,s){return(await j.post(`${this.baseUrl}/rooms/${t}/invite`,{userIds:s})).data||{invitedUsers:[],alreadyMembers:[],notFound:[]}}async getRoomMembers(t){return(await j.get(`${this.baseUrl}/rooms/${t}/members`)).data||{members:[],totalMembers:0,roomInfo:{id:"",name:"",authorId:"",createdAt:""}}}async removeMember(t,s){await j.delete(`${this.baseUrl}/rooms/${t}/members/${s}`)}async getMessages(t,s=1,n=50){return(await j.get(`${this.baseUrl}/rooms/${t}/messages?page=${s}&limit=${n}`)).data||{messages:[],total:0,page:1,limit:50,totalPages:0}}async updateMessage(t,s,n){return(await j.put(`${this.baseUrl}/rooms/${t}/messages/${s}`,n)).data?.message||{}}async deleteMessage(t,s){await j.delete(`${this.baseUrl}/rooms/${t}/messages/${s}`)}}const B=new Vn;class Rn{socket=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;connectionPromise=null;reconnectTimeout=null;connectionRefCount=0;messageListeners=[];messageUpdateListeners=[];messageDeleteListeners=[];typingListeners=[];userJoinedListeners=[];userLeftListeners=[];userOfflineInRoomListeners=[];roomDeletedListeners=[];roomUpdatedListeners=[];roomListUpdatedListeners=[];userRemovedFromRoomListeners=[];memberRemovedListeners=[];connectionListeners=[];connect(){return this.connectionRefCount++,this.isConnected?Promise.resolve():this.connectionPromise?this.connectionPromise:(this.connectionPromise=new Promise((t,s)=>{try{this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null);const o=T.getState().tokens?.accessToken;if(!o){this.connectionPromise=null,s(new Error("No authentication token available"));return}if(!O(o)){console.warn("Socket: Invalid token structure, cannot connect"),this.connectionPromise=null,s(new Error("Invalid authentication token structure"));return}if(X(o)){console.warn("Socket: Token is expired, attempting refresh before connection"),this.connectionPromise=null,this.handleTokenRefreshAndReconnect().then(()=>t()).catch(s);return}Ue(o)?.isNearExpiry&&console.log("Socket: Token near expiry, will monitor for refresh during connection"),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=Fs(te.socketUrl,{auth:{token:o},transports:["websocket","polling"],timeout:1e4,forceNew:!0}),this.socket.on("connect",()=>{console.log("Socket connected:",this.socket?.id),this.isConnected=!0,this.reconnectAttempts=0,this.connectionPromise=null,this.notifyConnectionListeners(!0),t()}),this.socket.on("disconnect",i=>{if(console.log("Socket disconnected:",i),this.isConnected=!1,this.connectionPromise=null,this.notifyConnectionListeners(!1),this.connectionRefCount>0){if(i==="io server disconnect"||i==="io client disconnect")return;this.handleReconnect()}}),this.socket.on("connect_error",i=>{console.error("Socket connection error:",i),this.isConnected=!1,this.connectionPromise=null,this.notifyConnectionListeners(!1),this.isAuthenticationError(i)?(console.log("Socket: Authentication error detected, attempting token refresh"),this.handleTokenRefreshAndReconnect().catch(c=>{console.error("Socket: Token refresh failed:",c),this.reconnectAttempts===0&&s(new Error(`Authentication failed: ${i.message}`))})):(this.reconnectAttempts===0&&s(i),this.connectionRefCount>0&&this.handleReconnect())}),this.socket.on("new-message",i=>{this.notifyMessageListeners(i.message)}),this.socket.on("message-updated",i=>{this.notifyMessageUpdateListeners(i)}),this.socket.on("message-deleted",i=>{this.notifyMessageDeleteListeners(i)}),this.socket.on("user-typing",i=>{this.notifyTypingListeners(i)}),this.socket.on("user-joined",i=>{this.notifyUserJoinedListeners(i)}),this.socket.on("user-left",i=>{this.notifyUserLeftListeners(i)}),this.socket.on("user-offline-in-room",i=>{this.notifyUserOfflineInRoomListeners(i)}),this.socket.on("room-deleted",i=>{this.notifyRoomDeletedListeners(i)}),this.socket.on("room-updated",i=>{this.notifyRoomUpdatedListeners(i)}),this.socket.on("room-list-updated",i=>{this.notifyRoomListUpdatedListeners(i)}),this.socket.on("user-removed-from-room",i=>{this.notifyUserRemovedFromRoomListeners(i)}),this.socket.on("member-removed",i=>{this.notifyMemberRemovedListeners(i)}),this.socket.on("error",i=>{console.error("Socket error:",i)})}catch(n){this.connectionPromise=null,s(n)}}),this.connectionPromise)}disconnect(){this.connectionRefCount=Math.max(0,this.connectionRefCount-1),this.connectionRefCount===0&&this.forceDisconnect()}forceDisconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.connectionPromise=null,this.reconnectAttempts=0,this.notifyConnectionListeners(!1)}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}if(this.connectionRefCount===0)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Attempting to reconnect in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{!this.isConnected&&this.connectionRefCount>0&&(this.connectionPromise=null,this.connect().catch(console.error))},t)}async handleTokenRefreshAndReconnect(){try{console.log("Socket: Attempting token refresh for reconnection...");const t=T.getState(),s=t.tokens?.refreshToken;if(!s)throw new Error("No refresh token available");if(!O(s))throw new Error("Invalid refresh token structure");if(X(s))throw new Error("Refresh token is expired");try{const{httpClient:n}=await se(async()=>{const{httpClient:o}=await Promise.resolve().then(()=>Ee);return{httpClient:o}},void 0);await n.forceRefresh(),console.log("Socket: Token refresh successful via httpClient")}catch(n){console.warn("Socket: httpClient refresh failed, trying direct API call:",n);const o=await fetch(`${te.socketUrl}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})});if(!o.ok){const m=await o.json().catch(()=>({}));throw new Error(`Token refresh failed: ${o.status} - ${m.message||o.statusText}`)}const a=await o.json();if(!a.success||!a.data?.tokens)throw new Error("Invalid refresh token response format");const{accessToken:i,refreshToken:c}=a.data.tokens;if(!O(i)||!O(c))throw new Error("Received invalid token structure from server");t.setTokens(a.data.tokens),console.log("Socket: Token refresh successful via direct API")}this.connectionPromise=null,this.reconnectAttempts=0,this.connectionRefCount>0&&(console.log("Socket: Attempting reconnection with new token..."),await this.connect())}catch(t){throw console.error("Socket: Token refresh failed:",t),T.getState().logout(),this.connectionPromise=null,this.isConnected=!1,t}}isAuthenticationError(t){if(!t||!t.message)return!1;const s=t.message.toLowerCase();return["authentication","token","unauthorized","expired","invalid","jwt","auth","forbidden"].some(o=>s.includes(o))}joinRoom(t){if(this.socket&&this.isConnected){const s=T.getState();this.socket.emit("join-room",{roomId:t,userId:s.user?.id})}}leaveRoom(t){if(this.socket&&this.isConnected){const s=T.getState();this.socket.emit("leave-room",{roomId:t,userId:s.user?.id})}}sendMessage(t,s){this.socket&&this.isConnected&&this.socket.emit("send-message",{roomId:t,content:s})}sendTyping(t,s){if(this.socket&&this.isConnected){const n=T.getState();this.socket.emit("typing",{roomId:t,userId:n.user?.id,username:n.user?.name,isTyping:s})}}onNewMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(s=>s!==t)}}onMessageUpdate(t){return this.messageUpdateListeners.push(t),()=>{this.messageUpdateListeners=this.messageUpdateListeners.filter(s=>s!==t)}}onMessageDelete(t){return this.messageDeleteListeners.push(t),()=>{this.messageDeleteListeners=this.messageDeleteListeners.filter(s=>s!==t)}}onTyping(t){return this.typingListeners.push(t),()=>{this.typingListeners=this.typingListeners.filter(s=>s!==t)}}onUserJoined(t){return this.userJoinedListeners.push(t),()=>{this.userJoinedListeners=this.userJoinedListeners.filter(s=>s!==t)}}onUserLeft(t){return this.userLeftListeners.push(t),()=>{this.userLeftListeners=this.userLeftListeners.filter(s=>s!==t)}}onUserOfflineInRoom(t){return this.userOfflineInRoomListeners.push(t),()=>{this.userOfflineInRoomListeners=this.userOfflineInRoomListeners.filter(s=>s!==t)}}onRoomDeleted(t){return this.roomDeletedListeners.push(t),()=>{this.roomDeletedListeners=this.roomDeletedListeners.filter(s=>s!==t)}}onRoomUpdated(t){return this.roomUpdatedListeners.push(t),()=>{this.roomUpdatedListeners=this.roomUpdatedListeners.filter(s=>s!==t)}}onRoomListUpdated(t){return this.roomListUpdatedListeners.push(t),()=>{this.roomListUpdatedListeners=this.roomListUpdatedListeners.filter(s=>s!==t)}}onUserRemovedFromRoom(t){return this.userRemovedFromRoomListeners.push(t),()=>{this.userRemovedFromRoomListeners=this.userRemovedFromRoomListeners.filter(s=>s!==t)}}onMemberRemoved(t){return this.memberRemovedListeners.push(t),()=>{this.memberRemovedListeners=this.memberRemovedListeners.filter(s=>s!==t)}}onConnectionChange(t){return this.connectionListeners.push(t),()=>{this.connectionListeners=this.connectionListeners.filter(s=>s!==t)}}notifyMessageListeners(t){this.messageListeners.forEach(s=>s(t))}notifyMessageUpdateListeners(t){this.messageUpdateListeners.forEach(s=>s(t))}notifyMessageDeleteListeners(t){this.messageDeleteListeners.forEach(s=>s(t))}notifyTypingListeners(t){this.typingListeners.forEach(s=>s(t))}notifyUserJoinedListeners(t){this.userJoinedListeners.forEach(s=>s(t))}notifyUserLeftListeners(t){this.userLeftListeners.forEach(s=>s(t))}notifyUserOfflineInRoomListeners(t){this.userOfflineInRoomListeners.forEach(s=>s(t))}notifyRoomDeletedListeners(t){this.roomDeletedListeners.forEach(s=>s(t))}notifyRoomUpdatedListeners(t){this.roomUpdatedListeners.forEach(s=>s(t))}notifyRoomListUpdatedListeners(t){this.roomListUpdatedListeners.forEach(s=>s(t))}notifyUserRemovedFromRoomListeners(t){this.userRemovedFromRoomListeners.forEach(s=>s(t))}notifyMemberRemovedListeners(t){this.memberRemovedListeners.forEach(s=>s(t))}notifyConnectionListeners(t){this.connectionListeners.forEach(s=>s(t))}reset(){this.connectionRefCount=0,this.forceDisconnect()}get connected(){return this.isConnected}get socketId(){return this.socket?.id}}const S=new Rn,Oe=vt()($s((r,t)=>({currentRoomId:null,isConnected:!1,rooms:[],messagesByRoom:{},typingUsersByRoom:{},isTyping:{},typingTimeouts:{},setCurrentRoom:s=>{r({currentRoomId:s}),s&&t().clearUnreadCount(s)},setConnected:s=>{r({isConnected:s})},setRooms:s=>{r({rooms:s})},addRoom:s=>{r(n=>({rooms:[s,...n.rooms.filter(o=>o.id!==s.id)]}))},updateRoom:(s,n)=>{r(o=>({rooms:o.rooms.map(a=>a.id===s?{...a,...n}:a)}))},removeRoom:s=>{r(n=>{const o={...n.messagesByRoom};delete o[s];const a={...n.typingUsersByRoom};return delete a[s],{rooms:n.rooms.filter(i=>i.id!==s),messagesByRoom:o,typingUsersByRoom:a,currentRoomId:n.currentRoomId===s?null:n.currentRoomId}})},setMessages:(s,n)=>{r(o=>({messagesByRoom:{...o.messagesByRoom,[s]:n}}))},addMessage:s=>{r(i=>{const c=i.messagesByRoom[s.roomId]||[];return c.find(u=>u.id===s.id)?i:{messagesByRoom:{...i.messagesByRoom,[s.roomId]:[...c,s]}}});const{currentRoomId:n,updateLastActivity:o,incrementUnreadCount:a}=t();o(s.roomId),n!==s.roomId&&a(s.roomId)},updateMessage:(s,n)=>{r(o=>{const a={...o.messagesByRoom};return Object.keys(a).forEach(i=>{a[i]=a[i].map(c=>c.id===s?{...c,...n}:c)}),{messagesByRoom:a}})},removeMessage:s=>{r(n=>{const o={...n.messagesByRoom};return Object.keys(o).forEach(a=>{o[a]=o[a].filter(i=>i.id!==s)}),{messagesByRoom:o}})},markMessageError:(s,n)=>{t().updateMessage(s,{error:n})},setTyping:(s,n)=>{const o=t();if(o.typingTimeouts[s]&&clearTimeout(o.typingTimeouts[s]),S.sendTyping(s,n),n){const a=window.setTimeout(()=>{t().setTyping(s,!1)},3e3);r(i=>({isTyping:{...i.isTyping,[s]:!0},typingTimeouts:{...i.typingTimeouts,[s]:a}}))}else r(a=>{const i={...a.isTyping};delete i[s];const c={...a.typingTimeouts};return delete c[s],{isTyping:i,typingTimeouts:c}})},addTypingUser:s=>{r(n=>({typingUsersByRoom:{...n.typingUsersByRoom,[s.roomId]:[...(n.typingUsersByRoom[s.roomId]||[]).filter(o=>o.userId!==s.userId),s]}}))},removeTypingUser:(s,n)=>{r(o=>({typingUsersByRoom:{...o.typingUsersByRoom,[n]:(o.typingUsersByRoom[n]||[]).filter(a=>a.userId!==s)}}))},clearTypingUsers:s=>{r(n=>({typingUsersByRoom:{...n.typingUsersByRoom,[s]:[]}}))},incrementUnreadCount:s=>{r(n=>({rooms:n.rooms.map(o=>o.id===s?{...o,unreadCount:(o.unreadCount||0)+1}:o)}))},clearUnreadCount:s=>{r(n=>({rooms:n.rooms.map(o=>o.id===s?{...o,unreadCount:0}:o)}))},updateLastActivity:s=>{const n=new Date().toISOString();r(o=>({rooms:o.rooms.map(a=>a.id===s?{...a,lastActivity:n}:a)}))},sendMessage:(s,n)=>{const o=n.trim();if(!o)return;const i=t().messagesByRoom[s]||[],c=i[i.length-1];c&&Math.abs(new Date().getTime()-new Date(c.createdAt).getTime())<500||(S.sendMessage(s,o),t().updateLastActivity(s))},joinRoom:s=>{S.joinRoom(s)},leaveRoom:s=>{S.leaveRoom(s)},cleanup:()=>{const s=t();Object.values(s.typingTimeouts).forEach(n=>{clearTimeout(n)}),r({currentRoomId:null,isConnected:!1,rooms:[],messagesByRoom:{},typingUsersByRoom:{},isTyping:{},typingTimeouts:{}})}}),{name:"chat-store"})),k={all:["chat"],rooms:()=>[...k.all,"rooms"],room:r=>[...k.all,"room",r],roomMembers:r=>[...k.all,"room",r,"members"],messages:r=>[...k.all,"messages",r]};function kn(r=1,t=10,s="updated_at",n="desc"){return de({queryKey:[...k.rooms(),r,t,s,n],queryFn:()=>B.getRooms(r,t,s,n),staleTime:5*60*1e3})}function Cn(r){return de({queryKey:k.room(r),queryFn:()=>B.getRoom(r),enabled:!!r,staleTime:5*60*1e3})}function Sn(){const r=A();return M({mutationFn:t=>B.createRoom(t),onSuccess:()=>{r.invalidateQueries({queryKey:k.rooms()})}})}function Tn(r){const t=A();return M({mutationFn:s=>B.updateRoom(r,s),onSuccess:s=>{t.setQueryData(k.room(r),s),t.invalidateQueries({queryKey:k.rooms()})}})}function Ln(){const r=A();return M({mutationFn:t=>B.deleteRoom(t),onSuccess:(t,s)=>{r.removeQueries({queryKey:k.room(s)}),r.invalidateQueries({queryKey:k.rooms()})}})}function Pn(){const r=A();return M({mutationFn:t=>B.joinRoom(t),onSuccess:(t,s)=>{r.setQueryData(k.room(s),t),r.invalidateQueries({queryKey:k.rooms()}),S.joinRoom(s)}})}function An(){const r=A();return M({mutationFn:t=>B.leaveRoom(t),onSuccess:(t,s)=>{S.leaveRoom(s),r.invalidateQueries({queryKey:k.rooms()})}})}function Mn(){const r=A();return M({mutationFn:({roomId:t,userIds:s})=>B.inviteUsers(t,s),onSuccess:(t,s)=>{r.invalidateQueries({queryKey:k.rooms()}),r.invalidateQueries({queryKey:k.room(s.roomId)}),console.log(`Successfully invited ${t.invitedUsers.length} users`),t.alreadyMembers.length>0&&console.log(`${t.alreadyMembers.length} users were already members`),t.notFound.length>0&&console.log(`${t.notFound.length} users were not found`)}})}function In(r){return de({queryKey:k.roomMembers(r),queryFn:()=>B.getRoomMembers(r),enabled:!!r,staleTime:2*60*1e3})}function Fn(){const r=A();return M({mutationFn:({roomId:t,memberId:s})=>B.removeMember(t,s),onSuccess:(t,s)=>{r.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),r.invalidateQueries({queryKey:k.room(s.roomId)})}})}function $n(r,t=50){return Os({queryKey:[...k.messages(r),"infinite"],queryFn:({pageParam:s=1})=>B.getMessages(r,s,t),enabled:!!r,initialPageParam:1,getNextPageParam:s=>{if(s.page<s.totalPages)return s.page+1},staleTime:1*60*1e3})}function On(r){const t=A();return M({mutationFn:({messageId:s,data:n})=>B.updateMessage(r,s,n),onSuccess:()=>{t.invalidateQueries({queryKey:k.messages(r)})}})}function _n(r){const t=A();return M({mutationFn:s=>B.deleteMessage(r,s),onSuccess:()=>{t.invalidateQueries({queryKey:k.messages(r)})}})}function zn(r){const t=A(),s=l.useCallback(a=>{a.roomId===r&&(t.setQueryData([...k.messages(r),"infinite"],i=>{if(!i)return i;const c=[...i.pages];return c.length>0&&(c[0]={...c[0],messages:[...c[0].messages,a],total:c[0].total+1}),{...i,pages:c}}),t.invalidateQueries({queryKey:k.messages(r)}))},[t,r]),n=l.useCallback(a=>{a.roomId===r&&t.setQueryData([...k.messages(r),"infinite"],i=>{if(!i)return i;const c=i.pages.map(m=>({...m,messages:m.messages.map(u=>u.id===a.messageId?{...u,content:a.content,updatedAt:new Date().toISOString()}:u)}));return{...i,pages:c}})},[t,r]),o=l.useCallback(a=>{a.roomId===r&&t.setQueryData([...k.messages(r),"infinite"],i=>{if(!i)return i;const c=i.pages.map(m=>({...m,messages:m.messages.filter(u=>u.id!==a.messageId),total:Math.max(0,m.total-1)}));return{...i,pages:c}})},[t,r]);l.useEffect(()=>{if(!r)return;const a=S.onNewMessage(s),i=S.onMessageUpdate(n),c=S.onMessageDelete(o);return()=>{a(),i(),c()}},[r,s,n,o])}function Bn(r){const{addTypingUser:t,removeTypingUser:s}=Oe(),n=l.useCallback(o=>{o.roomId===r&&(o.isTyping?t({userId:o.userId,username:o.username,roomId:o.roomId}):s(o.userId,o.roomId))},[r,t,s]);l.useEffect(()=>S.onTyping(n),[n])}function Kn(){const r=A(),t=l.useCallback(s=>{r.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),console.log(`${s.username} went offline in room ${s.roomId}`)},[r]);l.useEffect(()=>S.onUserOfflineInRoom(t),[t])}function Qn(){const r=A(),t=l.useCallback(s=>{r.invalidateQueries({queryKey:k.rooms()}),console.log(`Room deleted: ${s.message}`)},[r]);l.useEffect(()=>S.onRoomDeleted(t),[t])}function Hn(r){const t=ae(),s=l.useCallback(n=>{n.roomId===r&&(alert(n.message),t({to:"/chat"}))},[r,t]);l.useEffect(()=>S.onRoomDeleted(s),[s])}function Jn(){const r=A(),t=l.useCallback(n=>{r.invalidateQueries({queryKey:k.room(n.roomId)}),console.log(`Room updated: ${n.message}`)},[r]),s=l.useCallback(n=>{r.invalidateQueries({queryKey:k.rooms()}),console.log(`Room list updated: ${n.action} room ${n.room?.name||""}`)},[r]);l.useEffect(()=>{const n=S.onRoomUpdated(t),o=S.onRoomListUpdated(s);return()=>{n(),o()}},[t,s])}function Wn(r){const t=l.useCallback(s=>{s.roomId===r&&console.log(`Current room updated: ${s.message}`)},[r]);l.useEffect(()=>S.onRoomUpdated(t),[t])}function Yn(){const r=ae(),t=l.useCallback(s=>{alert(s.message),r({to:"/chat"})},[r]);l.useEffect(()=>S.onUserRemovedFromRoom(t),[t])}function Gn(){const r=A(),t=l.useCallback(s=>{r.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),r.invalidateQueries({queryKey:k.room(s.roomId)}),console.log(`Member removed: ${s.message}`)},[r]);l.useEffect(()=>S.onMemberRemoved(t),[t])}function Xn(){const[r,t]=l.useState(S.connected);return l.useEffect(()=>S.onConnectionChange(t),[]),{connected:r}}const Zn=zs,Xt=l.createContext({}),xt=({...r})=>e.jsxDEV(Xt.Provider,{value:{name:r.name},children:e.jsxDEV(Bs,{...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:29,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:28,columnNumber:5},void 0),_e=()=>{const r=l.useContext(Xt),t=l.useContext(Zt),{getFieldState:s,formState:n}=_s(),o=s(r.name,n);if(!r)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:r.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...o}},Zt=l.createContext({}),Ze=l.forwardRef(({className:r,...t},s)=>{const n=l.useId();return e.jsxDEV(Zt.Provider,{value:{id:n},children:e.jsxDEV("div",{ref:s,className:p("space-y-2",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:73,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:72,columnNumber:5},void 0)});Ze.displayName="FormItem";const et=l.forwardRef(({className:r,...t},s)=>{const{error:n,formItemId:o}=_e();return e.jsxDEV(P,{ref:s,className:p(n&&"text-destructive",r),htmlFor:o,...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:86,columnNumber:5},void 0)});et.displayName="FormLabel";const tt=l.forwardRef(({...r},t)=>{const{error:s,formItemId:n,formDescriptionId:o,formMessageId:a}=_e();return e.jsxDEV("div",{ref:t,id:n,"aria-describedby":s?`${o} ${a}`:`${o}`,"aria-invalid":!!s,...r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:103,columnNumber:5},void 0)});tt.displayName="FormControl";const st=l.forwardRef(({className:r,...t},s)=>{const{formDescriptionId:n}=_e();return e.jsxDEV("p",{ref:s,id:n,className:p("text-sm text-muted-foreground",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:125,columnNumber:5},void 0)});st.displayName="FormDescription";const rt=l.forwardRef(({className:r,children:t,...s},n)=>{const{error:o,formMessageId:a}=_e(),i=o?String(o?.message):t;return i?e.jsxDEV("p",{ref:n,id:a,className:p("text-sm font-medium text-destructive",r),...s,children:i},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/form.tsx",lineNumber:147,columnNumber:5},void 0):null});rt.displayName="FormMessage";const eo=Ks({name:dt().min(1,"Room name is required").max(100,"Room name must be less than 100 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Room name can only contain letters, numbers, spaces, hyphens, and underscores"),avatarUrl:dt().url("Must be a valid URL").optional().or(Qs(""))});function to({open:r,onOpenChange:t}){const s=Sn(),n=Hs({resolver:Js(eo),defaultValues:{name:"",avatarUrl:""}}),o=async i=>{try{await s.mutateAsync({name:i.name,avatarUrl:i.avatarUrl||void 0}),t(!1),n.reset()}catch(c){console.error("Failed to create room:",c)}},a=()=>{s.isPending||(t(!1),n.reset())};return e.jsxDEV(qe,{open:r,onOpenChange:a,children:e.jsxDEV(xe,{className:"sm:max-w-[425px]",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{children:"Create New Room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV(pe,{children:"Create a new chat room to start conversations with your team."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV(Zn,{...n,children:e.jsxDEV("form",{onSubmit:n.handleSubmit(o),className:"space-y-4",children:[e.jsxDEV(xt,{control:n.control,name:"name",render:({field:i})=>e.jsxDEV(Ze,{children:[e.jsxDEV(et,{children:"Room Name"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:97,columnNumber:19},this),e.jsxDEV(tt,{children:e.jsxDEV(L,{placeholder:"Enter room name...",...i,disabled:s.isPending},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:99,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:98,columnNumber:19},this),e.jsxDEV(st,{children:"Choose a descriptive name for your room."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV(rt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:108,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:96,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV(xt,{control:n.control,name:"avatarUrl",render:({field:i})=>e.jsxDEV(Ze,{children:[e.jsxDEV(et,{children:"Avatar URL (Optional)"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:118,columnNumber:19},this),e.jsxDEV(tt,{children:e.jsxDEV(L,{placeholder:"https://example.com/avatar.jpg",...i,disabled:s.isPending},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:120,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV(st,{children:"Provide a URL for the room's avatar image."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:126,columnNumber:19},this),e.jsxDEV(rt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:117,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV($e,{children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:a,disabled:s.isPending,children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV(d,{type:"submit",disabled:s.isPending,children:s.isPending?"Creating...":"Create Room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:143,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:134,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:91,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:82,columnNumber:7},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:81,columnNumber:5},this)}function so({room:r,isSelected:t,onClick:s}){const n=Pn(),{user:o}=T(),a=i=>{i.stopPropagation(),n.mutate(r.id)};return e.jsxDEV("div",{onClick:s,className:`flex items-center gap-3 p-3 cursor-pointer transition-colors hover:bg-gray-100 ${t?"bg-blue-50 border-r-2 border-blue-500":""}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:r.avatarUrl},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:41,columnNumber:11},this),e.jsxDEV(me,{children:e.jsxDEV(Ys,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:43,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:42,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:40,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:48,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:39,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"font-medium text-gray-900 truncate",children:r.name},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[r.unreadCount&&r.unreadCount>0&&e.jsxDEV(Ve,{variant:"destructive",className:"text-xs",children:r.unreadCount>99?"99+":r.unreadCount},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:59,columnNumber:15},this),r.lastActivity&&e.jsxDEV("span",{className:"text-xs text-gray-500",children:Lt(new Date(r.lastActivity),{addSuffix:!0})},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:65,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:57,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-1",children:[e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsxDEV(Ce,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("span",{children:[r.participants.length," members"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:73,columnNumber:11},this),o&&!r.participants.includes(o.id)&&e.jsxDEV(d,{size:"sm",variant:"outline",onClick:a,disabled:n.isPending,className:"h-6 px-2 text-xs",children:n.isPending?"Joining...":"Join"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:33,columnNumber:5},this)}function ro({onRoomSelect:r,selectedRoomId:t}){const[s,n]=l.useState(""),[o,a]=l.useState(!1),{data:i,isLoading:c,error:m,refetch:u}=kn(1,10,"updated_at","desc");Qn(),Jn();const v=i?.rooms||[];console.log("ChatRoomList Debug:",{isLoading:c,error:m,roomsData:i,rooms:v,roomsCount:v.length});const h=v.filter(g=>g.name.toLowerCase().includes(s.toLowerCase()));return c?e.jsxDEV("div",{className:"h-full flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Loading rooms..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:129,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:128,columnNumber:7},this):m?e.jsxDEV("div",{className:"h-full flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:"Failed to load rooms"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:141,columnNumber:11},this),e.jsxDEV(d,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:140,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:139,columnNumber:7},this):e.jsxDEV("div",{className:"h-full flex flex-col bg-white border-r",children:[e.jsxDEV("div",{className:"p-4 border-b",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:["Chat Rooms (",v.length,")"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:155,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>u(),className:"h-8 w-8 p-0",title:"Refresh rooms",children:e.jsxDEV(Ws,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:164,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:157,columnNumber:13},this),e.jsxDEV(d,{size:"sm",onClick:()=>a(!0),className:"h-8 w-8 p-0",children:e.jsxDEV(yt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:171,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:166,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:154,columnNumber:9},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:178,columnNumber:11},this),e.jsxDEV("input",{type:"text",placeholder:"Search rooms...",value:s,onChange:g=>n(g.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:179,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:177,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:153,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:h.length===0?e.jsxDEV("div",{className:"p-4 text-center text-gray-500",children:[s?"No rooms found":"No rooms available",!s&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV(d,{variant:"outline",size:"sm",onClick:()=>a(!0),children:"Create your first room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:196,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:195,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:192,columnNumber:11},this):e.jsxDEV("div",{className:"divide-y",children:h.map(g=>e.jsxDEV(so,{room:g,isSelected:t===g.id,onClick:()=>r(g.id)},g.id,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:209,columnNumber:15},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:207,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:190,columnNumber:7},this),e.jsxDEV(to,{open:o,onOpenChange:a},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:221,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:151,columnNumber:5},this)}const no=er,oo=tr,io=l.forwardRef(({className:r,inset:t,children:s,...n},o)=>e.jsxDEV(Pt,{ref:o,className:p("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",r),...n,children:[s,e.jsxDEV(Gs,{className:"ml-auto h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:37,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:27,columnNumber:3},void 0));io.displayName=Pt.displayName;const ao=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(At,{ref:s,className:p("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:47,columnNumber:3},void 0));ao.displayName=At.displayName;const es=l.forwardRef(({className:r,sideOffset:t=4,...s},n)=>e.jsxDEV(Xs,{children:e.jsxDEV(Mt,{ref:n,sideOffset:t,className:p("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:64,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:63,columnNumber:3},void 0));es.displayName=Mt.displayName;const ve=l.forwardRef(({className:r,inset:t,...s},n)=>e.jsxDEV(It,{ref:n,className:p("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",r),...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:83,columnNumber:3},void 0));ve.displayName=It.displayName;const lo=l.forwardRef(({className:r,children:t,checked:s,...n},o)=>e.jsxDEV(Ft,{ref:o,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:s,...n,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV($t,{children:e.jsxDEV(De,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:110,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:109,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:108,columnNumber:5},void 0),t]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:99,columnNumber:3},void 0));lo.displayName=Ft.displayName;const co=l.forwardRef(({className:r,children:t,...s},n)=>e.jsxDEV(Ot,{ref:n,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...s,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV($t,{children:e.jsxDEV(Zs,{className:"h-2 w-2 fill-current"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:133,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:132,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:131,columnNumber:5},void 0),t]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:123,columnNumber:3},void 0));co.displayName=Ot.displayName;const mo=l.forwardRef(({className:r,inset:t,...s},n)=>e.jsxDEV(_t,{ref:n,className:p("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",r),...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:147,columnNumber:3},void 0));mo.displayName=_t.displayName;const nt=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(zt,{ref:s,className:p("-mx-1 my-1 h-px bg-muted",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:163,columnNumber:3},void 0));nt.displayName=zt.displayName;function uo({message:r,isOwner:t,onEdit:s,onDelete:n,onReply:o}){const[a,i]=l.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(r.content)}catch(u){console.error("Failed to copy message:",u)}},m=()=>{n?.(r.id),i(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(no,{children:[e.jsxDEV(oo,{asChild:!0,children:e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(sr,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:63,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:58,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV(es,{align:"end",className:"w-48",children:[o&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ve,{onClick:()=>o(r),children:[e.jsxDEV(rr,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:71,columnNumber:17},this),"Reply"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:70,columnNumber:15},this),e.jsxDEV(nt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:74,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV(ve,{onClick:c,children:[e.jsxDEV(Je,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:80,columnNumber:13},this),"Copy message"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:79,columnNumber:11},this),t&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(nt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:87,columnNumber:15},this),s&&e.jsxDEV(ve,{onClick:()=>s(r.id),children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:92,columnNumber:19},this),"Edit message"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:91,columnNumber:17},this),n&&e.jsxDEV(ve,{onClick:()=>i(!0),className:"text-red-600 focus:text-red-600",children:[e.jsxDEV(be,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:103,columnNumber:19},this),"Delete message"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:99,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:86,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:66,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:56,columnNumber:7},this),e.jsxDEV(Se,{open:a,onOpenChange:i,children:e.jsxDEV(Te,{children:[e.jsxDEV(Le,{children:[e.jsxDEV(Ae,{children:"Delete Message"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV(Me,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:117,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:115,columnNumber:11},this),e.jsxDEV(Pe,{children:[e.jsxDEV(Fe,{children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV(Ie,{onClick:m,className:"bg-red-600 hover:bg-red-700",children:"Delete"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:121,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:114,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:113,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:55,columnNumber:5},this)}function ho({message:r,isOwn:t,showAvatar:s,onEdit:n,onDelete:o}){const[a,i]=l.useState(!1),[c,m]=l.useState(r.content),u=()=>{c.trim()&&c!==r.content&&n(r.id,c.trim()),i(!1)},v=q=>{q.key==="Enter"&&!q.shiftKey?(q.preventDefault(),u()):q.key==="Escape"&&(i(!1),m(r.content))},h=q=>{i(!0)},g=q=>{o(q)};return e.jsxDEV("div",{className:`flex gap-3 p-3 hover:bg-gray-50 group ${t?"flex-row-reverse":""}`,children:[s&&e.jsxDEV(le,{className:"w-8 h-8 flex-shrink-0",children:[e.jsxDEV(ce,{src:r.author.avatarUrl},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:60,columnNumber:11},this),e.jsxDEV(me,{children:r.author.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:59,columnNumber:9},this),e.jsxDEV("div",{className:`flex-1 min-w-0 ${t?"text-right":""}`,children:[s&&e.jsxDEV("div",{className:`flex items-center gap-2 mb-1 ${t?"justify-end":""}`,children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-900",children:r.author.username},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-gray-500",children:Lt(new Date(r.createdAt),{addSuffix:!0})},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:73,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("div",{className:`relative ${t?"ml-8":"mr-8"}`,children:[a?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("textarea",{value:c,onChange:q=>m(q.target.value),onKeyDown:v,className:"w-full p-2 text-sm border rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:Math.min(c.split(`
`).length,5),autoFocus:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:82,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2 text-xs",children:[e.jsxDEV(d,{size:"sm",onClick:u,children:"Save"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:91,columnNumber:17},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>i(!1),children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:92,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:81,columnNumber:13},this):e.jsxDEV("div",{className:`inline-block max-w-full p-3 rounded-lg text-sm break-words ${t?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"} ${r.error?"bg-red-100 border border-red-300":""}`,children:[r.content,r.error&&e.jsxDEV("div",{className:"mt-1 text-xs text-red-600",children:["Failed to send: ",r.error]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:107,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:98,columnNumber:13},this),!a&&e.jsxDEV("div",{className:`absolute top-0 ${t?"left-0 -translate-x-full":"right-0 translate-x-full"}`,children:e.jsxDEV(uo,{message:r,isOwner:t,onEdit:h,onDelete:g},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:117,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:116,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:67,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:57,columnNumber:5},this)}function xo({roomId:r,messages:t,isLoading:s,hasNextPage:n,onLoadMore:o}){const a=l.useRef(null),i=l.useRef(null),[c,m]=l.useState(!0),[u,v]=l.useState(!1),{user:h}=T(),{typingUsersByRoom:g}=Oe(),q=On(r),R=_n(r),w=g[r]||[],x=l.useCallback(()=>{if(!i.current)return;const{scrollTop:f,scrollHeight:b,clientHeight:$}=i.current,Z=b-f-$<100;m(Z);const ne=window.scrollY>300;v(ne),f===0&&n&&o&&o()},[n,o]),y=(f,b)=>{q.mutate({messageId:f,data:{content:b}})},N=f=>{R.mutate(f)},C=()=>{window.scrollTo({top:0,behavior:"smooth"})};return l.useEffect(()=>(window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[]),l.useEffect(()=>{c&&a.current&&a.current.scrollIntoView({behavior:"smooth"})},[t,c]),s&&t.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Loading messages..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:192,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:191,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 flex flex-col relative",children:[e.jsxDEV("div",{ref:i,onScroll:x,className:"flex-1 overflow-y-auto",children:[n&&e.jsxDEV("div",{className:"p-4 text-center",children:e.jsxDEV(d,{variant:"outline",size:"sm",onClick:o,disabled:s,children:s?"Loading...":"Load more messages"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:206,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1",children:t.map((f,b)=>{const $=t[b-1],Z=f.author.id===h?.id,ne=!$||$.author.id!==f.author.id||new Date(f.createdAt).getTime()-new Date($.createdAt).getTime()>5*60*1e3;return e.jsxDEV(ho,{message:f,isOwn:Z,showAvatar:ne,onEdit:y,onDelete:N},f.id,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:226,columnNumber:15},this)})},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:217,columnNumber:9},this),w.length>0&&e.jsxDEV("div",{className:"p-3 text-sm text-gray-500",children:w.length===1?e.jsxDEV("span",{children:[w[0].username," is typing..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:242,columnNumber:15},this):e.jsxDEV("span",{children:[w.map(f=>f.username).join(", ")," are typing..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:244,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:240,columnNumber:11},this),e.jsxDEV("div",{ref:a},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:249,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:199,columnNumber:7},this),u&&e.jsxDEV("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsxDEV(d,{onClick:C,size:"sm",className:"rounded-full w-12 h-12 p-0 shadow-xl bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 hover:text-gray-800 transition-all duration-200 hover:scale-105 backdrop-blur-sm",title:"Scroll to top",children:e.jsxDEV(nr,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:260,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:254,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:253,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageList.tsx",lineNumber:198,columnNumber:5},this)}function No({onEmojiSelect:r,disabled:t=!1}){const[s,n]=l.useState(!1),o=l.useRef(null),a=l.useRef(null);l.useEffect(()=>{const c=m=>{o.current&&a.current&&!o.current.contains(m.target)&&!a.current.contains(m.target)&&n(!1)};if(s)return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[s]);const i=c=>{r(c.native),n(!1)};return e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(d,{ref:a,type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>n(!s),disabled:t,title:"Add emoji",children:e.jsxDEV(or,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:43,columnNumber:7},this),s&&e.jsxDEV("div",{ref:o,className:"absolute bottom-full right-0 mb-2 z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg border",children:e.jsxDEV(ir,{data:ar,onEmojiSelect:i,theme:"light",set:"native",previewPosition:"none",skinTonePosition:"none",maxFrequentRows:2,perLine:8,emojiSize:20,emojiButtonSize:28,searchPosition:"sticky",navPosition:"bottom"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:62,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:42,columnNumber:5},this)}function fo({roomId:r,disabled:t=!1,placeholder:s="Type a message..."}){const[n,o]=l.useState(""),[a,i]=l.useState(!1),c=l.useRef(null),m=l.useRef(null),u=l.useRef(0),{sendMessage:v,setTyping:h}=Oe(),g=x=>{const y=c.current;if(!y)return;const N=y.selectionStart,C=y.selectionEnd,f=n.slice(0,N)+x+n.slice(C);o(f),w({target:{value:f}}),setTimeout(()=>{y.focus();const b=N+x.length;y.setSelectionRange(b,b)},0)},q=l.useCallback(x=>{x.preventDefault(),!(!n.trim()||t)&&(v(r,n.trim()),o(""),a&&(h(r,!1),i(!1)),c.current&&(c.current.style.height="auto"))},[n,t,r,v,h]),R=l.useCallback(x=>{x.key==="Enter"&&(x.preventDefault(),q(x))},[q]),w=l.useCallback(x=>{const y=x.target.value;o(y),c.current&&(c.current.style.height="auto",c.current.style.height=`${Math.min(c.current.scrollHeight,120)}px`);const N=Date.now();y.trim()?(a?N-u.current>1e3&&(h(r,!0),u.current=N):(i(!0),h(r,!0),u.current=N),m.current&&clearTimeout(m.current),m.current=window.setTimeout(()=>{i(!1),h(r,!1)},3e3)):a&&(i(!1),h(r,!1),m.current&&(clearTimeout(m.current),m.current=null))},[a,r,h]);return l.useEffect(()=>()=>{m.current&&clearTimeout(m.current),a&&h(r,!1)},[r,a,h]),e.jsxDEV("div",{className:"sticky bottom-0 z-10 border-t bg-white p-4 shadow-lg",children:[e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV("textarea",{ref:c,value:n,onChange:w,onKeyDown:R,placeholder:s,disabled:t,className:"w-full resize-none rounded-lg border border-gray-300 px-3 py-2 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",style:{minHeight:"40px",maxHeight:"120px"},rows:1},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsxDEV(No,{onEmojiSelect:g,disabled:t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:167,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:166,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:152,columnNumber:9},this),e.jsxDEV(d,{type:"button",size:"sm",disabled:!n.trim()||t,className:"h-10 px-3",onClick:x=>q(x),children:[e.jsxDEV(lr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV("span",{className:"sr-only",children:"Send message"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:182,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:151,columnNumber:7},this),n.length>1800&&e.jsxDEV("div",{className:"mt-1 text-xs text-gray-500 text-right",children:[n.length,"/2000"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:150,columnNumber:5},this)}const ts=l.forwardRef(({className:r,...t},s)=>e.jsxDEV(Bt,{ref:s,className:p("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...t,children:e.jsxDEV(cr,{className:p("flex items-center justify-center text-current"),children:e.jsxDEV(De,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/checkbox.tsx",lineNumber:24,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/checkbox.tsx",lineNumber:21,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/checkbox.tsx",lineNumber:13,columnNumber:3},void 0));ts.displayName=Bt.displayName;class po{baseUrl="/users";async searchUsers(t,s=1,n=10,o){const a=new URLSearchParams({page:s.toString(),limit:n.toString()});return t&&t.trim()&&a.append("q",t.trim()),o&&a.append("roomId",o),(await j.get(`${this.baseUrl}/search?${a.toString()}`)).data||{users:[],total:0,page:1,limit:10,totalPages:0}}}const go=new po,ss={all:["users"],search:(r,t,s,n)=>[...ss.all,"search",{query:r,page:t,limit:s,roomId:n}]};function vo(r,t=1,s=10,n){return de({queryKey:ss.search(r,t,s,n),queryFn:()=>go.searchUsers(r,t,s,n),staleTime:5*60*1e3,enabled:!0})}function bo(r,t){const[s,n]=l.useState(r);return l.useEffect(()=>{const o=setTimeout(()=>{n(r)},t);return()=>{clearTimeout(o)}},[r,t]),s}function Do({open:r,onOpenChange:t,roomId:s,roomName:n}){const[o,a]=l.useState(""),[i,c]=l.useState([]),m=bo(o,300),{data:u,isLoading:v}=vo(m,1,20,s),h=Mn(),g=u?.users||[],q=(x,y)=>{c(y?N=>[...N,x]:N=>N.filter(C=>C!==x))},R=async()=>{if(i.length!==0)try{await h.mutateAsync({roomId:s,userIds:i}),c([]),a(""),t(!1)}catch(x){console.error("Failed to invite users:",x)}},w=()=>{c([]),a(""),t(!1)};return e.jsxDEV(qe,{open:r,onOpenChange:w,children:e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(Ye,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:90,columnNumber:13},this),"Invite Users to ",n]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV(pe,{children:"Search and select users to invite to this chat room."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"search",children:"Search Users"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:101,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:103,columnNumber:15},this),e.jsxDEV(L,{id:"search",placeholder:"Search by username or email...",value:o,onChange:x=>a(x.target.value),className:"pl-10"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:104,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:100,columnNumber:11},this),i.length>0&&e.jsxDEV("div",{className:"text-sm text-gray-600",children:[i.length," user(s) selected"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{children:"Available Users"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("div",{className:"h-64 border rounded-md p-2 overflow-y-auto",children:v?e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(Y,{className:"h-6 w-6 animate-spin"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:127,columnNumber:19},this),e.jsxDEV("span",{className:"ml-2",children:"Searching users..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:128,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:126,columnNumber:17},this):g.length===0?e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:o?"No users found":"No users available"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:131,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-2",children:g.map(x=>e.jsxDEV("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50",children:[e.jsxDEV(ts,{id:x.id,checked:i.includes(x.id),onCheckedChange:y=>q(x.id,y)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:141,columnNumber:23},this),e.jsxDEV(le,{className:"h-8 w-8",children:[e.jsxDEV(ce,{src:x.avatarUrl,alt:x.username},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:149,columnNumber:25},this),e.jsxDEV(me,{children:x.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:150,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:148,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900 truncate",children:x.username},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:155,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-gray-500 truncate",children:x.email},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:158,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:154,columnNumber:23},this)]},x.id,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:137,columnNumber:21},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:135,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:124,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:122,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(d,{variant:"outline",onClick:w,children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:171,columnNumber:11},this),e.jsxDEV(d,{onClick:R,disabled:i.length===0||h.isPending,children:h.isPending?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:180,columnNumber:17},this),"Inviting..."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:179,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ye,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:185,columnNumber:17},this),"Invite ",i.length," User(s)"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:184,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:174,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:87,columnNumber:7},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:86,columnNumber:5},this)}function Nt({className:r,orientation:t="horizontal",decorative:s=!0,...n}){return e.jsxDEV(mr,{"data-slot":"separator",decorative:s,orientation:t,className:p("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...n},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/separator.tsx",lineNumber:13,columnNumber:5},this)}function Eo({room:r,trigger:t}){const[s,n]=l.useState(!1),[o,a]=l.useState({name:r.name,avatarUrl:r.avatarUrl||""}),i=Tn(r.id),c=async h=>{h.preventDefault();try{await i.mutateAsync({name:o.name.trim(),avatarUrl:o.avatarUrl.trim()||void 0}),n(!1)}catch(g){console.error("Failed to update room:",g)}},m=(h,g)=>{a(q=>({...q,[h]:g}))},u=o.name.trim().length>0,v=o.name!==r.name||o.avatarUrl!==(r.avatarUrl||"");return e.jsxDEV(qe,{open:s,onOpenChange:n,children:[e.jsxDEV(Yt,{asChild:!0,children:t||e.jsxDEV(d,{variant:"outline",className:"justify-start",children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:60,columnNumber:13},this),"Edit Room Info"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(We,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:68,columnNumber:13},this),"Edit Room Information"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(pe,{children:"Update the room name and avatar URL."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("form",{onSubmit:c,className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"room-name",children:"Room Name"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV(L,{id:"room-name",value:o.name,onChange:h=>m("name",h.target.value),placeholder:"Enter room name",maxLength:100,required:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:[o.name.length,"/100 characters"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:87,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"avatar-url",children:"Avatar URL (optional)"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV(L,{id:"avatar-url",type:"url",value:o.avatarUrl,onChange:h=>m("avatarUrl",h.target.value),placeholder:"https://example.com/avatar.jpg"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Provide a URL for the room's avatar image"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:92,columnNumber:11},this),o.avatarUrl&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{children:"Preview"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("img",{src:o.avatarUrl,alt:"Room avatar preview",className:"w-10 h-10 rounded-full object-cover",onError:h=>{h.target.style.display="none"}},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:111,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:o.name},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:120,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Room preview"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:121,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:110,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:108,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:i.isPending,children:[e.jsxDEV(it,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:134,columnNumber:15},this),"Cancel"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV(d,{type:"submit",disabled:!u||!v||i.isPending,children:[e.jsxDEV(St,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:141,columnNumber:15},this),i.isPending?"Saving...":"Save Changes"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:127,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:65,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:56,columnNumber:5},this)}function Uo({roomId:r,roomName:t,trigger:s}){const[n,o]=l.useState(!1),[a,i]=l.useState(""),c=ae(),m=Ln(),u=async()=>{try{await m.mutateAsync(r),o(!1),c({to:"/chat"})}catch(h){console.error("Failed to delete room:",h)}},v=a===t;return e.jsxDEV(Se,{open:n,onOpenChange:o,children:[e.jsxDEV(an,{asChild:!0,children:s||e.jsxDEV(d,{variant:"outline",className:"justify-start text-red-600 hover:text-red-700",children:[e.jsxDEV(be,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:51,columnNumber:13},this),"Delete Room"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:50,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV(Te,{className:"sm:max-w-md",children:[e.jsxDEV(Le,{children:[e.jsxDEV(Ae,{className:"flex items-center gap-2 text-red-600",children:[e.jsxDEV(Ge,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:59,columnNumber:13},this),"Delete Room"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV(Me,{className:"space-y-3",children:[e.jsxDEV("p",{children:["This action cannot be undone. This will permanently delete the room",e.jsxDEV("strong",{className:"font-semibold",children:[' "',t,'"']},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:65,columnNumber:15},this)," and remove all messages."]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV("p",{children:"All members will lose access to this room and its message history."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:76,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-sm font-medium text-red-800",children:"Warning: This action is irreversible"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:78,columnNumber:17},this),e.jsxDEV("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsxDEV("li",{children:"‚Ä¢ All messages will be permanently deleted"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:82,columnNumber:19},this),e.jsxDEV("li",{children:"‚Ä¢ All members will be removed from the room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:83,columnNumber:19},this),e.jsxDEV("li",{children:"‚Ä¢ Room history cannot be recovered"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:84,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:81,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:77,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:75,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(P,{htmlFor:"confirmation",children:["Type ",e.jsxDEV("strong",{children:t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:92,columnNumber:20},this)," to confirm deletion:"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:91,columnNumber:13},this),e.jsxDEV(L,{id:"confirmation",value:a,onChange:h=>i(h.target.value),placeholder:`Type "${t}" here`,className:"font-mono"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV(Pe,{children:[e.jsxDEV(Fe,{onClick:()=>{i(""),o(!1)},disabled:m.isPending,children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:105,columnNumber:11},this),e.jsxDEV(Ie,{onClick:u,disabled:!v||m.isPending,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:m.isPending?"Deleting...":"Delete Room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:56,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:47,columnNumber:5},this)}function yo({roomId:r,roomName:t,isAuthor:s,room:n}){const[o,a]=l.useState(!1),[i,c]=l.useState(!1),[m,u]=l.useState(!1),[v,h]=l.useState(!1),{user:g}=T(),q=ae(),{data:R,isLoading:w,error:x}=In(r),y=An(),N=Fn(),C=async()=>{try{await y.mutateAsync(r),c(!1),a(!1),q({to:"/chat"})}catch(V){console.error("Failed to leave room:",V)}},f=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=V=>V.isOnline?"Online":"Offline",$=async(V,je)=>{if(confirm(`Are you sure you want to remove ${je} from this room?`))try{await N.mutateAsync({roomId:r,memberId:V})}catch(we){console.error("Failed to remove member:",we)}},Z=async()=>{try{await navigator.clipboard.writeText(t),u(!0),setTimeout(()=>u(!1),2e3)}catch(V){console.error("Failed to copy room name:",V)}},ne=async()=>{try{await navigator.clipboard.writeText(r),h(!0),setTimeout(()=>h(!1),2e3)}catch(V){console.error("Failed to copy room ID:",V)}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(qe,{open:o,onOpenChange:a,children:[e.jsxDEV(Yt,{asChild:!0,children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:e.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:122,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:121,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:120,columnNumber:9},this),e.jsxDEV(xe,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(ht,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:128,columnNumber:15},this),"Room Settings"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:127,columnNumber:13},this),e.jsxDEV(pe,{children:["Manage ",t," settings and members"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:126,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Room Information"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:139,columnNumber:15},this),e.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Name:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:143,columnNumber:21},this),e.jsxDEV("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxDEV("p",{className:"flex-1",children:R?.roomInfo.name},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:145,columnNumber:23},this),e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:Z,title:"Copy room name",children:m?e.jsxDEV(De,{className:"w-3 h-3 text-green-600"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:154,columnNumber:27},this):e.jsxDEV(Je,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:156,columnNumber:27},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:146,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:144,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Created:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:162,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1",children:R?.roomInfo.createdAt&&f(R.roomInfo.createdAt)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:163,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:161,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Total Members:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:170,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1",children:R?.totalMembers||0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:171,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:169,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Online Members:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:174,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1 text-green-600",children:R?.members.filter(V=>V.isOnline).length||0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:175,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:173,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Room ID:"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:180,columnNumber:21},this),e.jsxDEV("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxDEV("p",{className:"flex-1 font-mono text-xs text-gray-500 break-all",children:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:182,columnNumber:23},this),e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:ne,title:"Copy room ID",children:v?e.jsxDEV(De,{className:"w-3 h-3 text-green-600"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:193,columnNumber:27},this):e.jsxDEV(Je,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:195,columnNumber:27},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:185,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:181,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:141,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:140,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:138,columnNumber:13},this),e.jsxDEV(Nt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:204,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsxDEV(Ce,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:210,columnNumber:19},this),"Members (",R?.totalMembers||0,")"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:209,columnNumber:17},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:208,columnNumber:15},this),w&&e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:"Loading members..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:216,columnNumber:17},this),x&&e.jsxDEV("div",{className:"text-center py-8 text-red-500",children:"Failed to load members"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:222,columnNumber:17},this),R?.members&&e.jsxDEV("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:R.members.map(V=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:V.avatarUrl},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:236,columnNumber:27},this),e.jsxDEV(me,{children:V.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:237,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:235,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:V.username},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:244,columnNumber:29},this),V.isAuthor&&e.jsxDEV(Ve,{variant:"secondary",className:"text-xs",children:[e.jsxDEV(ur,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:247,columnNumber:33},this),"Owner"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:246,columnNumber:31},this),V.id===g?.id&&e.jsxDEV(Ve,{variant:"outline",className:"text-xs",children:"You"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:252,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:243,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxDEV("span",{children:V.email},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:258,columnNumber:29},this),e.jsxDEV("span",{children:"‚Ä¢"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:259,columnNumber:29},this),e.jsxDEV("span",{className:V.isOnline?"text-green-600":"text-gray-400",children:b(V)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:260,columnNumber:29},this),e.jsxDEV("span",{children:"‚Ä¢"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:263,columnNumber:29},this),e.jsxDEV("span",{children:["Joined ",f(V.joinedAt)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:264,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:257,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:242,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:234,columnNumber:23},this),s&&V.id!==g?.id&&!V.isAuthor&&e.jsxDEV("div",{className:"flex items-center gap-1",children:e.jsxDEV(d,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>$(V.id,V.username),disabled:N.isPending,title:`Remove ${V.username} from room`,children:e.jsxDEV(dr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:280,columnNumber:29},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:272,columnNumber:27},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:271,columnNumber:25},this)]},V.id,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:230,columnNumber:21},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV(Nt,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:290,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Actions"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[s&&n&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Eo,{room:n},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:299,columnNumber:21},this),e.jsxDEV(Uo,{roomId:r,roomName:t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:300,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:298,columnNumber:19},this),!s&&e.jsxDEV(d,{variant:"outline",className:"justify-start text-red-600 hover:text-red-700",onClick:()=>c(!0),disabled:y.isPending,children:[e.jsxDEV(ot,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:311,columnNumber:21},this),y.isPending?"Leaving...":"Leave Room"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:305,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:136,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:125,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:119,columnNumber:7},this),e.jsxDEV(Se,{open:i,onOpenChange:c,children:e.jsxDEV(Te,{children:[e.jsxDEV(Le,{children:[e.jsxDEV(Ae,{className:"flex items-center gap-2",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-orange-500"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:326,columnNumber:15},this),"Leave Room"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:325,columnNumber:13},this),e.jsxDEV(Me,{children:['Are you sure you want to leave "',t,`"? You won't be able to see new messages unless someone invites you back.`]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:329,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:324,columnNumber:11},this),e.jsxDEV(Pe,{children:[e.jsxDEV(Fe,{children:"Cancel"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:335,columnNumber:13},this),e.jsxDEV(Ie,{onClick:C,className:"bg-red-600 hover:bg-red-700",disabled:y.isPending,children:y.isPending?"Leaving...":"Leave Room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:336,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:334,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:323,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:322,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:118,columnNumber:5},this)}const rs=l.createContext({connected:!1,socketId:null,connectionError:null}),ns=()=>{const r=l.useContext(rs);if(!r)throw new Error("useSocket must be used within a SocketProvider");return r};function qo({children:r}){const{isAuthenticated:t,tokens:s}=T(),[n,o]=l.useState(S.connected),[a,i]=l.useState(S.socketId),[c,m]=l.useState(null);l.useEffect(()=>{t&&s?.accessToken?(console.log("SocketProvider: User authenticated, connecting socket..."),(async()=>{try{m(null),await S.connect()}catch(h){console.error("SocketProvider: Failed to connect socket:",h),m(h instanceof Error?h.message:"Connection failed")}})()):(console.log("SocketProvider: User not authenticated, disconnecting socket..."),S.disconnect())},[t,s?.accessToken]),l.useEffect(()=>S.onConnectionChange(h=>{console.log("SocketProvider: Connection state changed:",h),o(h),i(S.socketId),h&&m(null)}),[]),l.useEffect(()=>()=>{console.log("SocketProvider: Cleaning up socket connection"),S.disconnect()},[]);const u={connected:n,socketId:a,connectionError:c};return e.jsxDEV(rs.Provider,{value:u,children:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/providers/SocketProvider.tsx",lineNumber:87,columnNumber:5},this)}const jo=Re("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ft({className:r,variant:t,...s}){return e.jsxDEV("div",{"data-slot":"alert",role:"alert",className:p(jo({variant:t}),r),...s},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert.tsx",lineNumber:28,columnNumber:5},this)}function pt({className:r,...t}){return e.jsxDEV("div",{"data-slot":"alert-description",className:p("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...t},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ui/alert.tsx",lineNumber:55,columnNumber:5},this)}function wo(){const{connected:r,connectionError:t}=ns();return r&&!t?null:e.jsxDEV("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:t?e.jsxDEV(ft,{variant:"destructive",children:[e.jsxDEV(Kt,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:18,columnNumber:11},this),e.jsxDEV(pt,{children:["Connection Error: ",t]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:19,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:17,columnNumber:9},this):r?null:e.jsxDEV(ft,{variant:"default",className:"border-yellow-200 bg-yellow-50",children:[e.jsxDEV(Qt,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:25,columnNumber:11},this),e.jsxDEV(pt,{className:"text-yellow-800",children:"Connecting to chat server..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:26,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:24,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:15,columnNumber:5},this)}function Vo(){const{connected:r,connectionError:t}=ns();return r&&!t?e.jsxDEV("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsxDEV(hr,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:42,columnNumber:9},this),e.jsxDEV("span",{children:"Connected"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:41,columnNumber:7},this):t?e.jsxDEV("div",{className:"flex items-center text-red-600 text-sm",children:[e.jsxDEV(Kt,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("span",{children:"Connection Error"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:50,columnNumber:7},this):e.jsxDEV("div",{className:"flex items-center text-yellow-600 text-sm",children:[e.jsxDEV(Qt,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:59,columnNumber:7},this),e.jsxDEV("span",{children:"Connecting..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:58,columnNumber:5},this)}function os({roomId:r}){const[t,s]=l.useState(!1),{setCurrentRoom:n,joinRoom:o,messagesByRoom:a}=Oe(),{connected:i}=Xn(),{user:c}=T(),{data:m,isLoading:u,error:v}=Cn(r),{data:h,isLoading:g,hasNextPage:q,fetchNextPage:R,isFetchingNextPage:w}=$n(r);zn(r),Bn(r),Kn(),Hn(r),Wn(r),Yn(),Gn();const x=a[r]||[],y=h?.pages.flatMap(f=>f.messages)||[],N=new Map;y.forEach(f=>{N.set(f.id,f)}),x.forEach(f=>{N.set(f.id,f)});const C=Array.from(N.values()).sort((f,b)=>new Date(f.createdAt).getTime()-new Date(b.createdAt).getTime());return l.useEffect(()=>(n(r),i&&o(r),()=>{n(null)}),[r,i,n,o]),v?e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:"Failed to load room"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:103,columnNumber:11},this),e.jsxDEV(d,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:104,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:102,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:101,columnNumber:7},this):u?e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Loading room..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:115,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:114,columnNumber:7},this):m?e.jsxDEV("div",{className:"h-full flex flex-col bg-white",children:[e.jsxDEV("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b bg-gray-50 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:m.avatarUrl},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:134,columnNumber:13},this),e.jsxDEV(me,{children:m.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:135,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"font-semibold text-gray-900",children:m.name},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxDEV(Ce,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:143,columnNumber:15},this),e.jsxDEV("span",{children:[m.participants.length," members"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:144,columnNumber:15},this),e.jsxDEV("span",{children:"‚Ä¢"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:145,columnNumber:15},this),e.jsxDEV(Vo,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:146,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:140,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[c&&m.authorId===c.id&&e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>s(!0),title:"Invite users to this room",children:e.jsxDEV(Ye,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:161,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsxDEV(xr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:166,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsxDEV(Nr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:168,columnNumber:11},this),e.jsxDEV(yo,{roomId:r,roomName:m.name,isAuthor:c?.id===m.authorId,room:m},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:171,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:131,columnNumber:7},this),!i&&e.jsxDEV("div",{className:"sticky top-[73px] z-10 bg-yellow-50 border-b border-yellow-200 px-4 py-2",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:184,columnNumber:13},this),e.jsxDEV("span",{children:"Reconnecting to chat..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:182,columnNumber:9},this),e.jsxDEV(xo,{roomId:r,messages:C,isLoading:g||w,hasNextPage:q,onLoadMore:()=>R()},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV(fo,{roomId:r,disabled:!i,placeholder:i?"Type a message...":"Connecting to chat..."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:200,columnNumber:7},this),e.jsxDEV(Do,{open:t,onOpenChange:s,roomId:r,roomName:m.name},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:211,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:129,columnNumber:5},this):e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Room not found"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:123,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:122,columnNumber:7},this)}const Ro=G("/chat")({beforeLoad:({location:r})=>{if(!T.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:r.href}})},component:ko});function ko(){const[r,t]=l.useState(null),s=ae(),n=o=>{t(o),s({to:"/room/$id",params:{id:o}}).catch(()=>{t(o)})};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"Chat"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:44,columnNumber:7},this),e.jsxDEV("div",{className:"h-[calc(100vh-4rem)] flex",children:[e.jsxDEV("div",{className:"w-80 flex-shrink-0",children:e.jsxDEV(ro,{onRoomSelect:n,selectedRoomId:r||void 0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:47,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1",children:r?e.jsxDEV(os,{roomId:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:53,columnNumber:29},this):e.jsxDEV("div",{className:"h-full flex items-center justify-center bg-white",children:e.jsxDEV("div",{className:"text-center text-gray-500",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:57,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:56,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:55,columnNumber:17},this),e.jsxDEV("h3",{className:"text-lg font-medium mb-2",children:"Select a room to start chatting"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:60,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm",children:"Choose a room from the sidebar to begin your conversation"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:61,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:54,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:53,columnNumber:68},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:45,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/chat.tsx",lineNumber:43,columnNumber:10},this)}const Co=G("/404")({component:So});function So(){return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(E,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:12,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:11,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:10,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-md mx-auto text-center",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("div",{className:"text-8xl mb-4",children:"üîç"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:19,columnNumber:11},this),e.jsxDEV("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Page Not Found"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mb-8",children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:22,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:18,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(E,{to:"/",children:e.jsxDEV(d,{className:"w-full",children:[e.jsxDEV(Ut,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:30,columnNumber:15},this),"Go to Homepage"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:29,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:28,columnNumber:11},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV(E,{to:"/todo",className:"flex-1",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Todo App"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:35,columnNumber:13},this),e.jsxDEV(E,{to:"/chat",className:"flex-1",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Chat Rooms"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:41,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:40,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:34,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:27,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:17,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/404.tsx",lineNumber:8,columnNumber:10},this)}const To=G("/")({component:Lo});function Lo(){const{isAuthenticated:r}=T(),t=[{icon:e.jsxDEV(fr,{className:"w-8 h-8"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:17,columnNumber:11},this),title:"Modern Tech Stack",description:"Built with React, TypeScript, TanStack Router, and TailwindCSS",color:"bg-blue-500"},{icon:e.jsxDEV(pr,{className:"w-8 h-8"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:22,columnNumber:11},this),title:"Full Stack Ready",description:"Complete MERN stack with MongoDB, Express, React, and Node.js",color:"bg-green-500"},{icon:e.jsxDEV(gr,{className:"w-8 h-8"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:27,columnNumber:11},this),title:"High Performance",description:"Optimized for speed with modern bundling and state management",color:"bg-yellow-500"},{icon:e.jsxDEV(vr,{className:"w-8 h-8"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:32,columnNumber:11},this),title:"Responsive Design",description:"Beautiful UI that works perfectly on all devices",color:"bg-purple-500"}],s=[{title:"Todo Manager",description:"Organize your tasks efficiently with our intuitive todo application",icon:e.jsxDEV(br,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:40,columnNumber:11},this),link:"/todo",color:"from-blue-500 to-blue-600"},{title:"Chat Rooms",description:"Connect with others in real-time chat rooms",icon:e.jsxDEV(Dr,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:46,columnNumber:11},this),link:"/chat",color:"from-green-500 to-green-600"},{title:"User Profile",description:"Manage your account settings and preferences",icon:e.jsxDEV(Ce,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:52,columnNumber:11},this),link:"/profile",color:"from-purple-500 to-purple-600"}];return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxDEV(ue,{transparent:!0},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("div",{className:"relative overflow-hidden",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Ve,{variant:"secondary",className:"mb-4",children:"üöÄ Modern Full Stack Application"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Welcome to"," ",e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MERN Stack"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:68,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"A modern, full-featured web application built with the latest technologies. Experience the power of React, TanStack Router, shadcn/ui, and TailwindCSS."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(E,{to:"/todo",children:e.jsxDEV(d,{size:"lg",className:"w-full sm:w-auto",children:["Try Todo App",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:81,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:79,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:78,columnNumber:19},this),e.jsxDEV(E,{to:"/chat",children:e.jsxDEV(d,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"Join Chat Rooms"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:85,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:84,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:77,columnNumber:34},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(E,{search:{redirect:"/todo"},to:"/login",children:e.jsxDEV(d,{size:"lg",className:"w-full sm:w-auto",children:["Sign In to Get Started",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:95,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:93,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:90,columnNumber:19},this),e.jsxDEV(E,{to:"/register",children:e.jsxDEV(d,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"Create Account"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:99,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:98,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:89,columnNumber:23},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:76,columnNumber:13},this),!r&&e.jsxDEV("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg max-w-md mx-auto",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsxDEV(He,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:108,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Authentication Required"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:109,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:107,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-blue-700 mt-1",children:"Sign in to access Todo Manager, Chat Rooms, and Profile features."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:111,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:106,columnNumber:34},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:62,columnNumber:11},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:61,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("div",{className:"py-24 bg-white",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Built with Modern Technologies"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our application leverages the latest and greatest technologies to provide you with the best possible experience."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,o)=>e.jsxDEV(K,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxDEV(H,{children:[e.jsxDEV("div",{className:`w-16 h-16 ${n.color} rounded-lg flex items-center justify-center text-white mx-auto mb-4`,children:n.icon},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:134,columnNumber:19},this),e.jsxDEV(J,{className:"text-lg",children:n.title},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:137,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV(Q,{children:e.jsxDEV(oe,{children:n.description},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:140,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:139,columnNumber:17},this)]},o,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:132,columnNumber:47},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:120,columnNumber:7},this),e.jsxDEV("div",{className:"py-24 bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Explore Our Applications"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover the powerful applications we've built to showcase the capabilities of our modern tech stack."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:154,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((n,o)=>e.jsxDEV(K,{className:"hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsxDEV(H,{children:[e.jsxDEV("div",{className:`w-12 h-12 bg-gradient-to-r ${n.color} rounded-lg flex items-center justify-center text-white mb-4`,children:n.icon},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:162,columnNumber:19},this),e.jsxDEV(J,{className:"text-xl",children:n.title},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:165,columnNumber:19},this),e.jsxDEV(oe,{children:n.description},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:166,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:161,columnNumber:17},this),e.jsxDEV(Q,{children:r?e.jsxDEV(E,{to:n.link,children:e.jsxDEV(d,{className:"w-full",children:["Try it now",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:172,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:170,columnNumber:23},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:169,columnNumber:38},this):e.jsxDEV(E,{search:{redirect:n.link},to:"/login",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:[e.jsxDEV(He,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:178,columnNumber:25},this),"Sign in to access"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:177,columnNumber:23},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:174,columnNumber:31},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:168,columnNumber:17},this)]},o,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:160,columnNumber:39},this))},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:149,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:148,columnNumber:7},this),e.jsxDEV("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxDEV("div",{className:"col-span-1 md:col-span-2",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:"MS"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:195,columnNumber:19},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:194,columnNumber:17},this),e.jsxDEV("span",{className:"ml-3 text-xl font-semibold",children:"MERN Stack"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:197,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-400 mb-4",children:"A modern full-stack application showcasing the power of React, TanStack Router, and modern web technologies."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:199,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Applications"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:205,columnNumber:15},this),e.jsxDEV("ul",{className:"space-y-2",children:[e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/todo",className:"text-gray-400 hover:text-white",children:"Todo Manager"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:207,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/chat",className:"text-gray-400 hover:text-white",children:"Chat Rooms"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:208,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:208,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/profile",className:"text-gray-400 hover:text-white",children:"User Profile"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:209,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:206,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:204,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Account"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:213,columnNumber:15},this),e.jsxDEV("ul",{className:"space-y-2",children:[e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/login",className:"text-gray-400 hover:text-white",search:{redirect:"/todo"},children:"Sign In"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:215,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:215,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/register",className:"text-gray-400 hover:text-white",children:"Sign Up"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:218,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:218,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(E,{to:"/forgot-password",className:"text-gray-400 hover:text-white",children:"Forgot Password"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:219,columnNumber:21},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:219,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:214,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:e.jsxDEV("p",{className:"text-gray-400",children:"¬© 2025 MERN Stack App. Built with ‚ù§Ô∏è using modern web technologies."},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:224,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:223,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:190,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:189,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/index.tsx",lineNumber:56,columnNumber:10},this)}const Po=G("/room/$id")({beforeLoad:({location:r})=>{if(!T.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:r.href}})},component:Ao});function Ao(){const{id:r}=Er({from:"/room/$id"});return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV("div",{className:"bg-white border-b px-4 py-3 sticky top-0 z-50",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:e.jsxDEV(E,{to:"/chat",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ie,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:39,columnNumber:17},this),"Back to Chat"]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:38,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:36,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(E,{to:"/",children:e.jsxDEV(d,{variant:"outline",size:"sm",children:"Home"},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:46,columnNumber:15},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:45,columnNumber:13},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:44,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:34,columnNumber:7},this),e.jsxDEV("div",{className:"h-[calc(100vh-4rem)]",children:e.jsxDEV(os,{roomId:r},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:56,columnNumber:9},this)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:55,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/routes/room.$id.tsx",lineNumber:32,columnNumber:10},this)}const Mo=Pr.update({id:"/verify-otp",path:"/verify-otp",getParentRoute:()=>W}),Io=un.update({id:"/todo",path:"/todo",getParentRoute:()=>W}),Fo=hn.update({id:"/register",path:"/register",getParentRoute:()=>W}),$o=Dn.update({id:"/profile",path:"/profile",getParentRoute:()=>W}),Oo=Un.update({id:"/login",path:"/login",getParentRoute:()=>W}),_o=qn.update({id:"/forgot-password",path:"/forgot-password",getParentRoute:()=>W}),zo=Ro.update({id:"/chat",path:"/chat",getParentRoute:()=>W}),Bo=Co.update({id:"/404",path:"/404",getParentRoute:()=>W}),Ko=To.update({id:"/",path:"/",getParentRoute:()=>W}),Qo=Po.update({id:"/room/$id",path:"/room/$id",getParentRoute:()=>W}),Ho={IndexRoute:Ko,R404Route:Bo,ChatRoute:zo,ForgotPasswordRoute:_o,LoginRoute:Oo,ProfileRoute:$o,RegisterRoute:Fo,TodoRoute:Io,VerifyOtpRoute:Mo,RoomIdRoute:Qo},Jo=W._addFileChildren(Ho)._addFileTypes(),Wo=new Ur({defaultOptions:{queries:{staleTime:60*1e3,gcTime:10*60*1e3,retry:(r,t)=>t?.status>=400&&t?.status<500&&![408,429].includes(t?.status)?!1:r<3,refetchOnWindowFocus:!1},mutations:{retry:(r,t)=>t?.status>=400&&t?.status<500&&![408,429].includes(t?.status)?!1:r<2}}}),Yo=yr({routeTree:Jo}),gt=document.getElementById("root");gt.innerHTML||qr.createRoot(gt).render(e.jsxDEV(jr,{client:Wo,children:e.jsxDEV(qo,{children:[e.jsxDEV(wr,{router:Yo},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/main.tsx",lineNumber:31,columnNumber:9},void 0),e.jsxDEV(wo,{},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/main.tsx",lineNumber:32,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/main.tsx",lineNumber:30,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/truongdq/Documents/dev/example-react/client/src/main.tsx",lineNumber:29,columnNumber:5},void 0));
